(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/qmn":function(t,e,n){var i=n("2oRo");t.exports=i.Promise},"8GlL":function(t,e,n){"use strict";var i=n("We1y"),a=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new a(t)}},PNPl:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var i=n("ODXe"),a=n("rePB"),r=n("1OyB"),o=n("vuIU"),s=n("md7G"),c=n("foSv"),l=n("ReuC"),u=n("Ji7U"),f=n("rpwb"),h=n("5lV4"),g=n("xBEo"),d=n("f5Sf"),v=n("rxlC"),p=n.n(v),y=n("Jh/b");function m(t,e){for(var n=0,i=0;i<t.length;i++){var a=t[i],r=null,o=e&&e[a];o&&(r=o.width),n+=r}return n}function x(t,e,n){for(var i=[],a=0,r=0,o=0;o<t.length;o++){var s=m(t[o],n);r+s>e&&(a<o&&i.push(t.substring(a,o)),a=o,r=0),r+=s}return a<t.length&&i.push(t.substring(a)),{rows:i,lastRowStartCharIndex:a,lastRowOffsetLeft:r}}function b(t,e,n,i){return"break-all"===e?x(t,n,i):function(t,e,n){for(var i=[],a=0,r=0,o=0,s=null,c=0;c<t.length;c++)if(" "===t[c]?(s=t[c],r=c+1):c+1<t.length&&" "===t[c+1]||c+1===t.length?(s=t.substring(r,c+1),r=c+1):s=null,s){var l=m(s,n);if(o+l>e){var u=r-s.length;if(a<u&&(i.push(t.substring(a,u)),a=u,o=0),l>e){var f=x(s,e,n);f.rows.length>1&&(i=i.concat(f.rows.slice(0,f.rows.length-1))),a+=f.lastRowStartCharIndex,l=f.lastRowOffsetLeft}}o+=l}return a<t.length&&i.push(t.substring(a)),{rows:i,lastRowStartCharIndex:a,lastRowOffsetLeft:o}}(t,n,i)}function _(t,e){for(var n=0,i=0,a=new Array(t.length),r=0;r<t.length;r++){var o=t[r],s=e[o];s?(i||(i=s.height),a[r]=n+s.width/2,n+=s.width):(y.a.warn("Missing character: ".concat(o))(),a[r]=n,n+=32)}return{leftOffsets:a,rowWidth:n,rowHeight:i}}var O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;Object(r.a)(this,t),this.limit=e,this.clear()}return Object(o.a)(t,[{key:"clear",value:function(){this._cache={},this._order=[]}},{key:"get",value:function(t){var e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}},{key:"set",value:function(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}},{key:"delete",value:function(t){this._cache[t]&&(this._deleteCache(t),this._deleteOrder(t))}},{key:"_deleteCache",value:function(t){delete this._cache[t]}},{key:"_deleteOrder",value:function(t){var e=this._order.findIndex((function(e){return e===t}));e>=0&&this._order.splice(e,1)}},{key:"_appendOrder",value:function(t){this._order.push(t)}}]),t}();var w=function(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),C=new O(3),S=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function k(t,e){var n=C.get(t);if(!n)return e;var i=[],a=n.mapping,r=Object.keys(a);r=new Set(r);var o=e;return o instanceof Array&&(o=new Set(o)),o.forEach((function(t){r.has(t)||i.push(t)})),i}function P(t,e){for(var n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function j(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}var z=function(){function t(e){Object(r.a)(this,t),this.gl=e,this.props={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:w,fontSize:64,buffer:2,sdf:!1,cutoff:.25,radius:3},this._key=null,this._texture=new d.a(this.gl)}return Object(o.a)(t,[{key:"finalize",value:function(){this._texture.delete()}},{key:"setProps",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S.forEach((function(n){n in e&&(t.props[n]=e[n])}));var n=this._key;this._key=this._getKey();var i=k(this._key,this.props.characterSet),a=C.get(this._key);if(a&&0===i.length)this._key!==n&&this._updateTexture(a);else{var r=this._generateFontAtlas(this._key,i,a);this._updateTexture(r),C.set(this._key,r)}}},{key:"_updateTexture",value:function(t){var e,n=t.data,i=t.width,r=t.height;this._texture.width===i&&this._texture.height===r||this._texture.resize({width:i,height:r}),this._texture.setImageData({data:n,width:i,height:r,parameters:(e={},Object(a.a)(e,10242,33071),Object(a.a)(e,10243,33071),e)}),this._texture.generateMipmap()}},{key:"_generateFontAtlas",value:function(t,e,n){var i=this.props,a=i.fontFamily,r=i.fontWeight,o=i.fontSize,s=i.buffer,c=i.sdf,l=i.radius,u=i.cutoff,f=n&&n.data;f||((f=document.createElement("canvas")).width=1024);var h=f.getContext("2d");j(h,a,o,r);var g=function(t){var e=t.characterSet,n=t.getFontWidth,i=t.fontHeight,a=t.buffer,r=t.maxCanvasWidth,o=t.mapping,s=void 0===o?{}:o,c=t.xOffset,l=void 0===c?0:c,u=t.yOffset,f=void 0===u?0:u,h=0,g=l,d=0,v=!0,p=!1,y=void 0;try{for(var m,x=e[Symbol.iterator]();!(v=(m=x.next()).done);v=!0){var b=m.value;if(!s[b]){var _=n(b,d++);g+_+2*a>r&&(g=0,h++),s[b]={x:g+a,y:f+h*(i+2*a)+a,width:_,height:i},g+=_+2*a}}}catch(C){p=!0,y=C}finally{try{v||null==x.return||x.return()}finally{if(p)throw y}}var O,w=i+2*a;return{mapping:s,xOffset:g,yOffset:f+h*w,canvasHeight:(O=f+(h+1)*w,Math.pow(2,Math.ceil(Math.log2(O))))}}(Object.assign({getFontWidth:function(t){return h.measureText(t).width},fontHeight:1.2*o,buffer:s,characterSet:e,maxCanvasWidth:1024},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),d=g.mapping,v=g.canvasHeight,y=g.xOffset,m=g.yOffset;if(f.height!==v){var x=h.getImageData(0,0,f.width,f.height);f.height=v,h.putImageData(x,0,0)}if(j(h,a,o,r),c){var b=new p.a(o,s,l,u,a,r),_=h.getImageData(0,0,b.size,b.size),O=!0,w=!1,C=void 0;try{for(var S,k=e[Symbol.iterator]();!(O=(S=k.next()).done);O=!0){var z=S.value;P(b.draw(z),_),h.putImageData(_,d[z].x-s,d[z].y-s)}}catch(E){w=!0,C=E}finally{try{O||null==k.return||k.return()}finally{if(w)throw C}}}else{var I=!0,M=!1,A=void 0;try{for(var F,T=e[Symbol.iterator]();!(I=(F=T.next()).done);I=!0){var L=F.value;h.fillText(L,d[L].x,d[L].y+.9*o)}}catch(E){M=!0,A=E}finally{try{I||null==T.return||T.return()}finally{if(M)throw A}}}return{xOffset:y,yOffset:m,mapping:d,data:f,width:f.width,height:f.height}}},{key:"_getKey",value:function(){var t=this.props,e=t.gl,n=t.fontFamily,i=t.fontWeight,a=t.fontSize,r=t.buffer,o=t.sdf,s=t.radius,c=t.cutoff;return o?"".concat(e," ").concat(n," ").concat(i," ").concat(a," ").concat(r," ").concat(s," ").concat(c):"".concat(e," ").concat(n," ").concat(i," ").concat(a," ").concat(r)}},{key:"texture",get:function(){return this._texture}},{key:"mapping",get:function(){var t=C.get(this._key);return t&&t.mapping}},{key:"scale",get:function(){return 1.2}}]),t}();function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var M={fontSize:64,buffer:2,sdf:!1,radius:3,cutoff:.25},A={start:1,middle:0,end:-1},F={top:1,center:0,bottom:-1},T=["fontSize","buffer","sdf","radius","cutoff"],L={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,backgroundColor:{type:"color",value:null,optional:!0},characterSet:w,fontFamily:"Monaco, monospace",fontWeight:"normal",lineHeight:1,fontSettings:{},wordBreak:"word-break",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:function(t){return t.text}},getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:[0,0,0,255]},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]}},E=function(t){function e(){return Object(r.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(o.a)(e,[{key:"initializeState",value:function(){this.state={styleVersion:0,fontAtlasManager:new z(this.context.gl)}}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,i=t.changeFlags,a=this._fontChanged(n,e);a&&this._updateFontAtlas(n,e);var r=a||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),r&&this.setState({styleVersion:this.state.styleVersion+1})}},{key:"finalizeState",value:function(){Object(l.a)(Object(c.a)(e.prototype),"finalizeState",this).call(this),this.state.fontAtlasManager.finalize()}},{key:"getPickingInfo",value:function(t){var e=t.info;return Object.assign(e,{object:e.index>=0?this.props.data[e.index]:null})}},{key:"_updateFontAtlas",value:function(t,e){var n=e.characterSet,i=e.fontSettings,a=e.fontFamily,r=e.fontWeight;this.state.fontAtlasManager.setProps(Object.assign({},M,i,{characterSet:n,fontFamily:a,fontWeight:r})),this.setNeedsRedraw(!0)}},{key:"_fontChanged",value:function(t,e){if(t.fontFamily!==e.fontFamily||t.characterSet!==e.characterSet||t.fontWeight!==e.fontWeight)return!0;if(t.fontSettings===e.fontSettings)return!1;var n=t.fontSettings||{},i=e.fontSettings||{};return T.some((function(t){return n[t]!==i[t]}))}},{key:"_updateText",value:function(){var t,e=this.props.data,n=e.attributes&&e.attributes.getText,i=this.props.getText,r=e.startIndices;if(n&&r){var o=function(t){var e=t.value,n=t.length,i=t.stride,a=t.offset,r=t.startIndices,o=e.BYTES_PER_ELEMENT,s=i?i/o:1,c=a?a/o:0,l=r[n]||Math.floor((e.length-c-o)/s)+1,u=new Array(n),f=e;if(s>1||c>0){f=new e.constructor(l);for(var h=0;h<l;h++)f[h]=e[h*s+c]}for(var g=0;g<n;g++){var d=r[g],v=r[g+1]||l;u[g]=String.fromCodePoint.apply(null,f.subarray(d,v))}return{texts:u,characterCount:l}}(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},ArrayBuffer.isView(n)?{value:n}:n,{length:e.length,startIndices:r})),s=o.texts;t=o.characterCount,i=function(t,e){var n=e.index;return s[n]}}else{var c=Object(f.a)(e),l=c.iterable,u=c.objectInfo;r=[0],t=0;var h=!0,g=!1,d=void 0;try{for(var v,p=l[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value;u.index++,t+=(i(y,u)||"").length,r.push(t)}}catch(m){g=!0,d=m}finally{try{h||null==p.return||p.return()}finally{if(g)throw d}}}this.setState({getText:i,startIndices:r,numInstances:t})}},{key:"getIconOffsets",value:function(t,e){var n=this.state.fontAtlasManager.mapping,a=this.state.getText,r=this.props,o=r.wordBreak,s=r.maxWidth,c=r.lineHeight,l=r.getTextAnchor,u=r.getAlignmentBaseline,f=a(t,e)||"",h=function(t,e,n,i,a){for(var r=new Array(t.length),o=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,s=[0,0],c=0,l=0,u=0;u<=t.length;u++){var f=t[u],h=void 0;if("\n"!==f&&void 0!==f||(h=t.slice(l,u)),h){var g=o?b(h,n,i,a).rows:[h],d=!0,v=!1,p=void 0;try{for(var y,m=g[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var x=_(y.value,a),O=x.rowWidth,w=x.rowHeight,C=x.leftOffsets,S=!0,k=!1,P=void 0;try{for(var j,z=C[Symbol.iterator]();!(S=(j=z.next()).done);S=!0){var I=j.value;r[l++]={x:I,y:c+w/2,rowWidth:O}}}catch(M){k=!0,P=M}finally{try{S||null==z.return||z.return()}finally{if(k)throw P}}c+=w*e,s[0]=o?i:Math.max(s[0],O)}}catch(M){v=!0,p=M}finally{try{d||null==m.return||m.return()}finally{if(v)throw p}}}"\n"===f&&(r[l++]={x:0,y:0,rowWidth:0})}return s[1]=c,{characters:r,size:s}}(f,c,o,s,n),g=h.characters,d=Object(i.a)(h.size,2),v=d[0],p=d[1],y=A["function"==typeof l?l(t,e):l],m=F["function"==typeof u?u(t,e):u],x=new Array(2*f.length),O=0,w=!0,C=!1,S=void 0;try{for(var k,P=g[Symbol.iterator]();!(w=(k=P.next()).done);w=!0){var j=k.value,z=j.rowWidth,I=j.x,M=j.y,T=(1-y)*(v-z)/2;x[O++]=(y-1)*v/2+T+I,x[O++]=(m-1)*p/2+M}}catch(L){C=!0,S=L}finally{try{w||null==P.return||P.return()}finally{if(C)throw S}}return x}},{key:"renderLayers",value:function(){var t=this.state,e=t.startIndices,n=t.numInstances,i=t.getText,a=t.fontAtlasManager,r=a.scale,o=a.texture,s=a.mapping,c=t.styleVersion,l=this.props,u=l.data,f=l._dataDiff,h=l.backgroundColor,d=l.getPosition,v=l.getColor,p=l.getSize,y=l.getAngle,m=l.getPixelOffset,x=l.billboard,b=l.sdf,_=l.sizeScale,O=l.sizeUnits,w=l.sizeMinPixels,C=l.sizeMaxPixels,S=l.transitions,k=l.updateTriggers,P=this.getIconOffsets.bind(this);return new(this.getSubLayerClass("characters",g.a))({sdf:b,iconAtlas:o,iconMapping:s,backgroundColor:h,getPosition:d,getColor:v,getSize:p,getAngle:y,getPixelOffset:m,billboard:x,sizeScale:_*r,sizeUnits:O,sizeMinPixels:w*r,sizeMaxPixels:C*r,transitions:S&&{getPosition:S.getPosition,getAngle:S.getAngle,getColor:S.getColor,getSize:S.getSize,getPixelOffset:k.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getPosition:k.getPosition,getAngle:k.getAngle,getColor:k.getColor,getSize:k.getSize,getPixelOffset:k.getPixelOffset,getIconOffsets:{getText:k.getText,getTextAnchor:k.getTextAnchor,getAlignmentBaseline:k.getAlignmentBaseline,styleVersion:c}}}),{data:u,_dataDiff:f,startIndices:e,numInstances:n,getIconOffsets:P,getIcon:i})}}]),e}(h.a);E.layerName="TextLayer",E.defaultProps=L},"R1+Y":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("1OyB"),a=n("vuIU"),r=n("md7G"),o=n("foSv"),s=n("Ji7U"),c=n("Jh/b"),l=n("rpwb"),u=n("5lV4"),f=n("KHNG"),h=n("ctuC"),g=n("3DrS"),d=n("Im0j"),v={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:function(t){return t.polygon}},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},p=function(t){function e(){return Object(i.a)(this,e),Object(r.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(a.a)(e,[{key:"initializeState",value:function(){this.state={paths:[]},this.props.getLineDashArray&&c.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){var e=this,n=(t.oldProps,t.props,t.changeFlags),i=n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon);if(i&&Array.isArray(n.dataChanged)){var a=this.state.paths.slice(),r=n.dataChanged.map((function(t){return Object(d.a)({data:a,getIndex:function(t){return t.__source.index},dataRange:t,replace:e._getPaths(t)})}));this.setState({paths:a,pathsDiff:r})}else i&&this.setState({paths:this._getPaths(),pathsDiff:null})}},{key:"_getPaths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props,n=e.data,i=e.getPolygon,a=e.positionFormat,r=e._normalize,o=[],s="XY"===a?2:3,c=t.startRow,u=t.endRow,f=Object(l.a)(n,c,u),h=f.iterable,d=f.objectInfo,v=!0,p=!1,y=void 0;try{for(var m,x=h[Symbol.iterator]();!(v=(m=x.next()).done);v=!0){var b=m.value;d.index++;var _=i(b,d);r&&(_=g.b(_,s));var O=_,w=O.holeIndices,C=_.positions||_;if(w)for(var S=0;S<=w.length;S++){var k=C.slice(w[S-1]||0,w[S]||C.length);o.push(this.getSubLayerRow({path:k},b,d.index))}else o.push(this.getSubLayerRow({path:C},b,d.index))}}catch(P){p=!0,y=P}finally{try{v||null==x.return||x.return()}finally{if(p)throw y}}return o}},{key:"renderLayers",value:function(){var t=this.props,e=t.data,n=t._dataDiff,i=t.stroked,a=t.filled,r=t.extruded,o=t.wireframe,s=t._normalize,c=t.elevationScale,l=t.transitions,u=t.positionFormat,g=this.props,d=g.lineWidthUnits,v=g.lineWidthScale,p=g.lineWidthMinPixels,y=g.lineWidthMaxPixels,m=g.lineJointRounded,x=g.lineMiterLimit,b=g.lineDashJustified,_=this.props,O=_.getFillColor,w=_.getLineColor,C=_.getLineWidth,S=_.getLineDashArray,k=_.getElevation,P=_.getPolygon,j=_.updateTriggers,z=_.material,I=this.state,M=I.paths,A=I.pathsDiff,F=this.getSubLayerClass("fill",f.a),T=this.getSubLayerClass("stroke",h.a),L=this.shouldRenderSubLayer("fill",M)&&new F({_dataDiff:n,extruded:r,elevationScale:c,filled:a,wireframe:o,_normalize:s,getElevation:k,getFillColor:O,getLineColor:w,material:z,transitions:l},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:j.getPolygon,getElevation:j.getElevation,getFillColor:j.getFillColor,getLineColor:j.getLineColor}}),{data:e,positionFormat:u,getPolygon:P});return[!r&&L,!r&&i&&this.shouldRenderSubLayer("stroke",M)&&new T({_dataDiff:A&&function(){return A},widthUnits:d,widthScale:v,widthMinPixels:p,widthMaxPixels:y,rounded:m,miterLimit:x,dashJustified:b,_pathType:"loop",transitions:l&&{getWidth:l.getLineWidth,getColor:l.getLineColor,getPath:l.getPolygon},getColor:this.getSubLayerAccessor(w),getWidth:this.getSubLayerAccessor(C),getDashArray:this.getSubLayerAccessor(S)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:j.getLineWidth,getColor:j.getLineColor,getDashArray:j.getLineDashArray}}),{data:M,positionFormat:u,getPath:function(t){return t.path}}),r&&L]}}]),e}(u.a);p.layerName="PolygonLayer",p.defaultProps=v},SEBh:function(t,e,n){var i=n("glrk"),a=n("UIe5"),r=n("tiKp")("species");t.exports=function(t,e){var n,o=i(t).constructor;return void 0===o||null==(n=i(o)[r])?e:a(n)}},UIe5:function(t,e,n){var i=n("aO6C"),a=n("DVFp");t.exports=function(t){if(i(t))return t;throw TypeError(a(t)+" is not a constructor")}},aO6C:function(t,e,n){var i=n("0Dky"),a=n("Fib7"),r=n("9d/t"),o=n("0GbY"),s=n("iSVu"),c=[],l=o("Reflect","construct"),u=/^\s*(?:class|function)\b/,f=u.exec,h=!u.exec((function(){})),g=function(t){if(!a(t))return!1;try{return l(Object,c,t),!0}catch(e){return!1}};t.exports=!l||i((function(){var t;return g(g.call)||!g(Object)||!g((function(){t=!0}))||t}))?function(t){if(!a(t))return!1;switch(r(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return h||!!f.call(u,s(t))}:g},ccK8:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("1OyB"),a=n("vuIU");function r(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}var o=n("U8pU"),s={number:{validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate:function(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function c(t){var e=l(t);return"object"===e?t?"type"in t?Object.assign({},t,s[t.type]):"value"in t?(e=l(t.value),Object.assign({type:e},t,s[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},s[e])}function l(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":Object(o.a)(t)}var u=function(){function t(e){var n=e.name,a=e.vs,o=e.fs,s=e.dependencies,l=void 0===s?[]:s,u=e.uniforms,f=e.getUniforms,h=e.deprecations,g=void 0===h?[]:h,d=e.defines,v=void 0===d?{}:d,p=e.inject,y=void 0===p?{}:p,m=e.vertexShader,x=e.fragmentShader;Object(i.a)(this,t),r("string"==typeof n),this.name=n,this.vs=a||m,this.fs=o||x,this.getModuleUniforms=f,this.dependencies=l,this.deprecations=this._parseDeprecationDefinitions(g),this.defines=v,this.injections=function(t){var e={vs:{},fs:{}};for(var n in t){var i=t[n],a=n.slice(0,2);"string"==typeof i&&(i={injection:i}),e[a][n]=i}return e}(y),u&&(this.uniforms=function(t){var e={};for(var n in t){var i=c(t[n]);e[n]=i}return e}(u))}return Object(a.a)(t,[{key:"getModuleSource",value:function(t){var e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:r(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(t,e){this.deprecations.forEach((function(n){n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(t){return t.forEach((function(t){switch(t.type){case"function":t.regex=new RegExp("\\b".concat(t.old,"\\("));break;default:t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))}})),t}},{key:"_defaultGetUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=this.uniforms;for(var i in n){var a=n[i];i in t&&!a.private?(a.validate&&r(a.validate(t[i],a),"".concat(this.name,": invalid ").concat(i)),e[i]=t[i]):e[i]=a.value}return e}}]),t}();function f(t){if(!t.normalized&&(t.normalized=!0,t.uniforms&&!t.getUniforms)){var e=new u(t);t.getUniforms=e.getUniforms.bind(e)}return t}},djvz:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("1OyB"),a=n("vuIU"),r=n("md7G"),o=n("foSv"),s=n("Ji7U"),c=n("uCGa"),l=n("uvYE"),u=n("iein"),f=n("pRFE"),h=function(t){function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,e),n=Object(r.a)(this,Object(o.a)(e).call(this,t,a));var s=a.module,c=a.fs,u=a.id;return n.model=new l.a(t,{id:u,fs:c,modules:[s]}),n}return Object(s.a)(e,t),Object(a.a)(e,[{key:"render",value:function(t){var e=this,n=this.gl;Object(u.j)(n,{framebuffer:t.outputBuffer,clearColor:[0,0,0,0]},(function(){return e._renderPass(n,t)}))}},{key:"delete",value:function(){this.model.delete(),this.model=null}},{key:"_renderPass",value:function(t,e){var n=e.inputBuffer;e.outputBuffer;Object(f.a)(t,{color:!0}),this.model.draw({moduleSettings:this.props.moduleSettings,uniforms:{texture:n,texSize:[n.width,n.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),e}(n("mC81").a),g=n("ccK8"),d=function(t){function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,e),(n=Object(r.a)(this,Object(o.a)(e).call(this,a))).id="".concat(t.name,"-pass"),Object(g.a)(t),n.module=t,n}return Object(s.a)(e,t),Object(a.a)(e,[{key:"postRender",value:function(t,e){this.passes||(this.passes=function(t,e,n,i){if(e.filter||e.sampler){var a=y(e);return[new h(t,{id:n,module:e,fs:a,moduleSettings:i})]}return(e.passes||[]).map((function(a,r){var o=y(e,a),s="".concat(n,"-").concat(r);return new h(t,{id:s,module:e,fs:o,moduleSettings:i})}))}(t,this.module,this.id,this.props));for(var n=e.target,i=e.inputBuffer,a=e.swapBuffer,r=0;r<this.passes.length;r++){n&&r===this.passes.length-1&&(a=n),this.passes[r].render({inputBuffer:i,outputBuffer:a});var o=a;a=i,i=o}return i}},{key:"cleanup",value:function(){if(this.passes){var t=!0,e=!1,n=void 0;try{for(var i,a=this.passes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.delete()}}catch(r){e=!0,n=r}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}this.passes=null}}}]),e}(c.a);var v=function(t){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(t,"(gl_FragColor, texSize, texCoord);\n}\n")},p=function(t){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(t,"(texture, texSize, texCoord);\n}\n")};function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(e.filter){var n="string"==typeof e.filter?e.filter:"".concat(t.name,"_filterColor");return v(n)}if(e.sampler){var i="string"==typeof e.sampler?e.sampler:"".concat(t.name,"_sampleColor");return p(i)}return null}},kENN:function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));n("IZzc");var i,a=n("1OyB"),r=n("vuIU"),o=n("md7G"),s=n("foSv"),c=n("ReuC"),l=n("Ji7U"),u=n("K4gp"),f=n("BQ9P"),h=n("K7jV"),g=n("ykdB"),d=n("0i8A"),v=(n("p532"),n("rePB")),p=n("MdWm"),y=n("p7wt"),m=n("f5Sf"),x=n("nJkv"),b=n("JBga"),_=n("rpwb"),O=n("Jh/b"),w=function(){},C=(i={},Object(v.a)(i,10241,9987),Object(v.a)(i,10240,9729),Object(v.a)(i,10242,33071),Object(v.a)(i,10243,33071),i);function S(t){return t&&(t.id||t.url)}function k(t,e,n){for(var i=0;i<e.length;i++){var a=e[i],r=a.icon,o=a.xOffset;t[S(r)]=Object.assign({},r,{x:o,y:n})}}var P=function(){function t(e,n){var i=n.onUpdate,r=void 0===i?w:i;Object(a.a)(this,t),this.gl=e,this.onUpdate=r,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}return Object(r.a)(t,[{key:"finalize",value:function(){this._texture&&this._texture.delete()}},{key:"getTexture",value:function(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function(t){var e=this._autoPacking?S(t):t;return this._mapping[e]||{}}},{key:"setProps",value:function(t){var e=t.loadOptions,n=t.autoPacking,i=t.iconAtlas,a=t.iconMapping,r=t.data,o=t.getIcon;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),o&&(this._getIcon=o),a&&(this._mapping=a),i&&this._updateIconAtlas(i),this._autoPacking&&(r||o)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(r))}},{key:"_updateIconAtlas",value:function(t){this._texture&&(this._texture.delete(),this._texture=null),t instanceof m.a?(t.setParameters(C),this._externalTexture=t,this.onUpdate()):t&&(this._texture=new m.a(this.gl,{data:t,parameters:C}),this.onUpdate())}},{key:"_updateAutoPacking",value:function(t){var e,n,i,a,r,o,s=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};var i={},a=Object(_.a)(t),r=a.iterable,o=a.objectInfo,s=!0,c=!1,l=void 0;try{for(var u,f=r[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var h=u.value;o.index++;var g=e(h,o),d=S(g);if(!g)throw new Error("Icon is missing.");if(!g.url)throw new Error("Icon url is missing.");i[d]||n[d]&&g.url===n[d].url||(i[d]=g)}}catch(v){c=!0,l=v}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}return i}(t,this._getIcon,this._mapping)||{});if(s.length>0){var c=function(t){for(var e,n=t.icons,i=t.buffer,a=t.mapping,r=void 0===a?{}:a,o=t.xOffset,s=void 0===o?0:o,c=t.yOffset,l=void 0===c?0:c,u=t.rowHeight,f=void 0===u?0:u,h=t.canvasWidth,g=[],d=0;d<n.length;d++){var v=n[d];if(!r[S(v)]){var p=v.height,y=v.width;s+y+i>h&&(k(r,g,l),s=0,l=f+l+i,f=0,g=[]),g.push({icon:v,xOffset:s}),s=s+y+i,f=Math.max(f,p)}}return g.length>0&&k(r,g,l),{mapping:r,rowHeight:f,xOffset:s,yOffset:l,canvasWidth:h,canvasHeight:(e=f+l+i,Math.pow(2,Math.ceil(Math.log2(e))))}}({icons:s,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset}),l=c.mapping,u=c.xOffset,f=c.yOffset,h=c.rowHeight,g=c.canvasHeight;this._rowHeight=h,this._mapping=l,this._xOffset=u,this._yOffset=f,this._canvasHeight=g,this._texture||(this._texture=new m.a(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:C})),this._texture.height!==this._canvasHeight&&(this._texture=(this.gl,e=this._texture,n=this._canvasWidth,i=this._canvasHeight,a=e.width,r=e.height,o=Object(p.a)(e,{width:n,height:i}),Object(y.b)(e,o,{targetY:0,width:a,height:r}),e.delete(),o)),this.onUpdate(),this._loadIcons(s)}}},{key:"_loadIcons",value:function(t){var e=this,n=this._canvas.getContext("2d"),i=!0,a=!1,r=void 0;try{for(var o,s=function(){var t=o.value;e._pendingCount++,Object(b.a)(t.url,x.a,e._loadOptions).then((function(i){var a=S(t),r=e._mapping[a],o=r.x,s=r.y,c=r.width,l=r.height,u=function(t,e,n,i){return n===e.width&&i===e.height?e:(t.canvas.height=i,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,i),t.canvas)}(n,i,c,l);e._texture.setSubImageData({data:u,x:o,y:s,width:c,height:l}),e._texture.generateMipmap(),e.onUpdate()})).catch((function(t){O.a.error(t)()})).finally((function(){e._pendingCount--}))},c=t[Symbol.iterator]();!(i=(o=c.next()).done);i=!0)s()}catch(l){a=!0,r=l}finally{try{i||null==c.return||c.return()}finally{if(a)throw r}}}},{key:"isLoaded",get:function(){return 0===this._pendingCount}}]),t}(),j=[0,0,0,255],z={iconAtlas:{type:"object",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:function(t){return t.position}},getIcon:{type:"accessor",value:function(t){return t.icon}},getColor:{type:"accessor",value:j},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]}},I=function(t){function e(){return Object(a.a)(this,e),Object(o.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(r.a)(e,[{key:"getShaders",value:function(){return Object(c.a)(Object(s.a)(e.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[u.a,f.a]})}},{key:"initializeState",value:function(){var t=this;this.state={iconManager:new P(this.context.gl,{onUpdate:function(){return t._onUpdate()}})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:j},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(t){var n=t.oldProps,i=t.props,a=t.changeFlags;Object(c.a)(Object(s.a)(e.prototype),"updateState",this).call(this,{props:i,oldProps:n,changeFlags:a});var r=this.getAttributeManager(),o=i.iconAtlas,l=i.iconMapping,u=i.data,f=i.getIcon,h=this.state.iconManager;h.setProps({loadOptions:i.loadOptions});var g=!1;if(o||this.internalState.isAsyncPropLoading("iconAtlas")?(n.iconAtlas!==i.iconAtlas&&h.setProps({iconAtlas:o,autoPacking:!1}),n.iconMapping!==i.iconMapping&&(h.setProps({iconMapping:l}),g=!0)):h.setProps({autoPacking:!0}),(a.dataChanged||a.updateTriggersChanged&&(a.updateTriggersChanged.all||a.updateTriggersChanged.getIcon))&&(h.setProps({data:u,getIcon:f}),g=!0),g&&(r.invalidate("instanceOffsets"),r.invalidate("instanceIconFrames"),r.invalidate("instanceColorModes")),a.extensionsChanged){var d=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(d)}),r.invalidateAll()}}},{key:"finalizeState",value:function(){Object(c.a)(Object(s.a)(e.prototype),"finalizeState",this).call(this),this.state.iconManager.finalize()}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,i=n.sizeScale,a=n.sizeMinPixels,r=n.sizeMaxPixels,o=n.sizeUnits,s=n.billboard,c=n.alphaCutoff,l=this.state.iconManager,u=this.context.viewport,f=l.getTexture();f&&f.loaded&&this.state.model.setUniforms(Object.assign({},e,{iconsTexture:f,iconsTextureDim:[f.width,f.height],sizeScale:i*("pixels"===o?u.metersPerPixel:1),sizeMinPixels:a,sizeMaxPixels:r,billboard:s,alphaCutoff:c})).draw()}},{key:"_getModel",value:function(t){return new g.a(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new d.a({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}},{key:"_onUpdate",value:function(){this.setNeedsRedraw()}},{key:"getInstanceOffset",value:function(t){var e=this.state.iconManager.getIconMapping(t);return[e.width/2-e.anchorX||0,e.height/2-e.anchorY||0]}},{key:"getInstanceColorMode",value:function(t){return this.state.iconManager.getIconMapping(t).mask?1:0}},{key:"getInstanceIconFrame",value:function(t){var e=this.state.iconManager.getIconMapping(t);return[e.x||0,e.y||0,e.width||0,e.height||0]}},{key:"isLoaded",get:function(){return Object(c.a)(Object(s.a)(e.prototype),"isLoaded",this)&&this.state.iconManager.isLoaded}}]),e}(h.a);I.layerName="IconLayer",I.defaultProps=z},p532:function(t,e,n){"use strict";var i=n("I+eb"),a=n("xDBR"),r=n("/qmn"),o=n("0Dky"),s=n("0GbY"),c=n("Fib7"),l=n("SEBh"),u=n("zfnd"),f=n("busE");if(i({target:"Promise",proto:!0,real:!0,forced:!!r&&o((function(){r.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=l(this,s("Promise")),n=c(t);return this.then(n?function(n){return u(e,t()).then((function(){return n}))}:t,n?function(n){return u(e,t()).then((function(){throw n}))}:t)}}),!a&&c(r)){var h=s("Promise").prototype.finally;r.prototype.finally!==h&&f(r.prototype,"finally",h,{unsafe:!0})}},rxlC:function(t,e,n){"use strict";n("IZzc"),t.exports=a,t.exports.default=a;var i=1e20;function a(t,e,n,i,a,r){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=a||"sans-serif",this.fontWeight=r||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer,s=o+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function r(t,e,n,i,a,r){for(var s=0;s<e;s++)o(t,s,e,n,i,a,r);for(var c=0;c<n;c++)o(t,c*e,1,e,i,a,r)}function o(t,e,n,a,r,o,s){var c,l,u,f;for(o[0]=0,s[0]=-i,s[1]=i,c=0;c<a;c++)r[c]=t[e+c*n];for(c=1,l=0,u=0;c<a;c++){do{f=o[l],u=(r[c]-r[f]+c*c-f*f)/(c-f)/2}while(u<=s[l]&&--l>-1);o[++l]=c,s[l]=u,s[l+1]=i}for(c=0,l=0;c<a;c++){for(;s[l+1]<c;)l++;f=o[l],t[e+c*n]=r[f]+(c-f)*(c-f)}}a.prototype._draw=function(t,e){var n,a,o,s,c,l,u,f,h,g=this.ctx.measureText(t),d=g.width,v=2*this.buffer;e&&this.useMetrics?(c=Math.floor(g.actualBoundingBoxAscent),f=this.buffer+Math.ceil(g.actualBoundingBoxAscent),l=this.buffer,u=this.buffer,n=(a=Math.min(this.size,Math.ceil(g.actualBoundingBoxRight-g.actualBoundingBoxLeft)))+v,o=(s=Math.min(this.size-l,Math.ceil(g.actualBoundingBoxAscent+g.actualBoundingBoxDescent)))+v,this.ctx.textBaseline="alphabetic"):(n=a=this.size,o=s=this.size,c=19*this.fontSize/24,l=u=0,f=this.middle,this.ctx.textBaseline="middle"),a&&s&&(this.ctx.clearRect(u,l,a,s),this.ctx.fillText(t,this.buffer,f),h=this.ctx.getImageData(u,l,a,s));var p=new Uint8ClampedArray(n*o);return function(t,e,n,a,r,o,s){o.fill(i,0,e*n),s.fill(0,0,e*n);for(var c=(e-a)/2,l=0;l<r;l++)for(var u=0;u<a;u++){var f=(l+c)*e+u+c,h=t.data[4*(l*a+u)+3]/255;if(1===h)o[f]=0,s[f]=i;else if(0===h)o[f]=i,s[f]=0;else{var g=Math.max(0,.5-h),d=Math.max(0,h-.5);o[f]=g*g,s[f]=d*d}}}(h,n,o,a,s,this.gridOuter,this.gridInner),r(this.gridOuter,n,o,this.f,this.v,this.z),r(this.gridInner,n,o,this.f,this.v,this.z),function(t,e,n,i,a,r,o){for(var s=0;s<e*n;s++){var c=Math.sqrt(i[s])-Math.sqrt(a[s]);t[s]=Math.round(255-255*(c/r+o))}}(p,n,o,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:a,height:s,sdfWidth:n,sdfHeight:o,top:c,left:0,advance:d}}},a.prototype.draw=function(t){return this._draw(t,!1).data},a.prototype.drawWithMetrics=function(t){return this._draw(t,!0)}},uvYE:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n("IZzc");var i=n("1OyB"),a=n("md7G"),r=n("foSv"),o=n("Ji7U"),s=n("ykdB"),c=n("0i8A"),l=[-1,-1,1,-1,-1,1,1,1],u=function(t){function e(t,n){var o;Object(i.a)(this,e);var s=l.map((function(t){return-1===t?0:t}));return(o=Object(a.a)(this,Object(r.a)(e).call(this,t,Object.assign({},n,{vs:"attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",geometry:new c.a({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(l)},aTexCoord:{size:2,value:new Float32Array(s)},aCoordinate:{size:2,value:new Float32Array(s)}}})})))).setVertexCount(4),o}return Object(o.a)(e,t),e}(s.a)},xBEo:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("1OyB"),a=n("vuIU"),r=n("md7G"),o=n("foSv"),s=n("ReuC"),c=n("Ji7U"),l=n("kENN"),u=[],f=function(t){function e(){return Object(i.a)(this,e),Object(r.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(c.a)(e,t),Object(a.a)(e,[{key:"getShaders",value:function(){return Object.assign({},Object(s.a)(Object(o.a)(e.prototype),"getShaders",this).call(this),{inject:{"vs:#decl":"\n  uniform float gamma;\n  varying float vGamma;\n","vs:#main-end":"\n  vGamma = gamma / (sizeScale * iconSize.y);\n"},fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float buffer;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform bool shouldDrawBackground;\nuniform vec3 backgroundColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying float vGamma;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    if (sdf) {\n      alpha = smoothstep(buffer - vGamma, buffer + vGamma, alpha);\n    }\n    float a = alpha * vColor.a;\n    \n    if (a < alphaCutoff) {\n      if (shouldDrawBackground) {\n        gl_FragColor = vec4(backgroundColor, vColor.a);\n        return;\n      } else {\n        discard;\n      }\n    }\n\n    if (shouldDrawBackground) {\n      gl_FragColor = vec4(mix(backgroundColor, vColor.rgb, alpha), vColor.a * opacity);\n    } else {\n      gl_FragColor = vec4(vColor.rgb, a * opacity);\n    }\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"})}},{key:"initializeState",value:function(){var t=this;Object(s.a)(Object(o.a)(e.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:function(e,n){var i=n.index,a=n.target;return t.encodePickingColor(i,a)}}})}},{key:"updateState",value:function(t){Object(s.a)(Object(o.a)(e.prototype),"updateState",this).call(this,t);var n=t.oldProps,i=t.props;if(i.backgroundColor!==n.backgroundColor){var a=Array.isArray(i.backgroundColor)?i.backgroundColor.map((function(t){return t/255})).slice(0,3):null;this.setState({backgroundColor:a})}}},{key:"draw",value:function(t){var n=t.uniforms,i=this.props.sdf,a=this.state.backgroundColor,r=Array.isArray(a);Object(s.a)(Object(o.a)(e.prototype),"draw",this).call(this,{uniforms:Object.assign({},n,{buffer:.75,gamma:.2,sdf:Boolean(i),backgroundColor:a||[0,0,0],shouldDrawBackground:r})})}},{key:"getInstanceOffset",value:function(t){var n=this;return t?Array.from(t).map((function(t){return Object(s.a)(Object(o.a)(e.prototype),"getInstanceOffset",n).call(n,t)})):u}},{key:"getInstanceColorMode",value:function(t){return 1}},{key:"getInstanceIconFrame",value:function(t){var n=this;return t?Array.from(t).map((function(t){return Object(s.a)(Object(o.a)(e.prototype),"getInstanceIconFrame",n).call(n,t)})):u}}]),e}(l.a);f.layerName="MultiIconLayer",f.defaultProps={backgroundColor:{type:"color",value:null,optional:!0},getIconOffsets:{type:"accessor",value:function(t){return t.offsets}}}},zfnd:function(t,e,n){var i=n("glrk"),a=n("hh1v"),r=n("8GlL");t.exports=function(t,e){if(i(t),a(e)&&e.constructor===t)return e;var n=r.f(t);return(0,n.resolve)(e),n.promise}}}]);