(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+w+S":function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));r("IZzc");var n=r("1OyB"),i=r("vuIU"),a=r("md7G"),o=r("foSv"),s=r("ReuC"),u=r("Ji7U"),l=r("Jh/b"),c=r("K4gp"),h=r("DAeo"),f=r("BQ9P"),d=r("K7jV"),y=r("f5Sf"),v=r("0i8A"),m=r("iein"),g=r("ykdB"),p=r("d3kR"),b=r("tMmZ"),O=r("HIr8");function S(e){l.a.assert(e.positions||e.POSITION,'SimpleMeshLayer requires "postions" or "POSITION" attribute in mesh property.')}function w(e){if(e.attributes)return S(e.attributes),e instanceof v.a?e:new v.a(e);if(e.positions||e.POSITION)return S(e),new v.a({attributes:e});throw Error("Invalid mesh")}var x={mesh:{value:null,type:"object",async:!0},texture:{type:"object",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},parameters:{depthTest:!0,depthFunc:515},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(e){return e.position}},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},k=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getShaders",value:function(){var e=!Object(m.g)(this.context.gl),r={};return Object(p.b)(this.context.gl,b.a.GLSL_DERIVATIVES)&&(r.DERIVATIVES_AVAILABLE=1),Object(s.a)(Object(o.a)(t.prototype),"getShaders",this).call(this,{vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  vColor = instanceColors;\n  geometry.normal = normals_commonspace;\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n  }\n\n  geometry.position = position_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[c.a,h.b,f.a],transpileToGLSL100:e,defines:r})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:O.a}),this.setState({emptyTexture:new y.a(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(e){var r=e.props,n=e.oldProps,i=e.changeFlags;if(Object(s.a)(Object(o.a)(t.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i}),r.mesh!==n.mesh||i.extensionsChanged){if(this.state.model&&this.state.model.delete(),r.mesh){this.setState({model:this.getModel(r.mesh)});var a=r.mesh.attributes||r.mesh;this.setState({hasNormals:Boolean(a.NORMAL||a.normals)})}this.getAttributeManager().invalidateAll()}r.texture!==n.texture&&this.setTexture(r.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(){Object(s.a)(Object(o.a)(t.prototype),"finalizeState",this).call(this),this.state.emptyTexture.delete(),this.state.texture&&this.state.texture.delete()}},{key:"draw",value:function(e){var t=e.uniforms;if(this.state.model){var r=this.context.viewport,n=this.props,i=n.sizeScale,a=n.coordinateSystem,o=n._instanced;this.state.model.draw({uniforms:Object.assign({},t,{sizeScale:i,composeModelMatrix:!o||Object(O.b)(r,a),flatShading:!this.state.hasNormals})})}}},{key:"getModel",value:function(e){var t=new g.a(this.context.gl,Object.assign({},this.getShaders(),{id:this.props.id,geometry:w(e),isInstanced:!0})),r=this.state,n=r.texture,i=r.emptyTexture;return t.setUniforms({sampler:n||i,hasTexture:Boolean(n)}),t}},{key:"setTexture",value:function(e){var t=this.context.gl,r=this.state,n=r.emptyTexture,i=r.model;this.state.texture&&this.state.texture.delete();var a=e?function(e,t,r){return t instanceof y.a?t:new y.a(e,Object.assign({data:t},r))}(t,e):null;this.setState({texture:a}),i&&i.setUniforms({sampler:a||n,hasTexture:Boolean(a)})}}]),t}(d.a);k.layerName="SimpleMeshLayer",k.defaultProps=x},"Ai+L":function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var n=r("KQm4"),i=r("ODXe"),a=r("1OyB"),o=r("vuIU"),s=r("md7G"),u=r("foSv"),l=r("Ji7U"),c=r("rePB"),h=r("5lV4"),f=r("+w+S"),d=r("zGfa"),y=r("V3d6"),v=r("JBga"),m=(r("IZzc"),r("o0o1")),g=r.n(m),p=r("HaE+"),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:257;Object(a.a)(this,e),this.gridSize=t;var r=t-1;if(r&r-1)throw new Error("Expected grid size to be 2^n+1, got ".concat(t,"."));this.numTriangles=r*r*2-2,this.numParentTriangles=this.numTriangles-r*r,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(4*this.numTriangles);for(var n=0;n<this.numTriangles;n++){var i=n+2,o=0,s=0,u=0,l=0,c=0,h=0;for(1&i?u=l=c=r:o=s=h=r;(i>>=1)>1;){var f=o+u>>1,d=s+l>>1;1&i?(u=o,l=s,o=c,s=h):(o=u,s=l,u=c,l=h),c=f,h=d}var y=4*n;this.coords[y+0]=o,this.coords[y+1]=s,this.coords[y+2]=u,this.coords[y+3]=l}}return Object(o.a)(e,[{key:"createTile",value:function(e){return new O(e,this)}}]),e}(),O=function(){function e(t,r){Object(a.a)(this,e);var n=r.gridSize;if(t.length!==n*n)throw new Error("Expected terrain data of length ".concat(n*n," (").concat(n," x ").concat(n,"), got ").concat(t.length,"."));this.terrain=t,this.martini=r,this.errors=new Float32Array(t.length),this.update()}return Object(o.a)(e,[{key:"update",value:function(){for(var e=this.martini,t=e.numTriangles,r=e.numParentTriangles,n=e.coords,i=e.gridSize,a=this.terrain,o=this.errors,s=t-1;s>=0;s--){var u=4*s,l=n[u+0],c=n[u+1],h=n[u+2],f=n[u+3],d=l+h>>1,y=c+f>>1,v=d+y-c,m=y+l-d,g=(a[c*i+l]+a[f*i+h])/2,p=y*i+d,b=Math.abs(g-a[p]);if(o[p]=Math.max(o[p],b),s<r){var O=(c+m>>1)*i+(l+v>>1),S=(f+m>>1)*i+(h+v>>1);o[p]=Math.max(o[p],o[O],o[S])}}}},{key:"getMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.martini,r=t.gridSize,n=t.indices,i=this.errors,a=0,o=0,s=r-1;function u(t,s,l,c,h,f){var d=t+l>>1,y=s+c>>1;Math.abs(t-h)+Math.abs(s-f)>1&&i[y*r+d]>e?(u(h,f,t,s,d,y),u(l,c,h,f,d,y)):(n[s*r+t]=n[s*r+t]||++a,n[c*r+l]=n[c*r+l]||++a,n[f*r+h]=n[f*r+h]||++a,o++)}n.fill(0),u(0,0,s,s,s,0),u(s,s,0,0,0,s);var l=new Uint16Array(2*a),c=new Uint32Array(3*o),h=0;function f(t,a,o,s,u,d){var y=t+o>>1,v=a+s>>1;if(Math.abs(t-u)+Math.abs(a-d)>1&&i[v*r+y]>e)f(u,d,t,a,y,v),f(o,s,u,d,y,v);else{var m=n[a*r+t]-1,g=n[s*r+o]-1,p=n[d*r+u]-1;l[2*m]=t,l[2*m+1]=a,l[2*g]=o,l[2*g+1]=s,l[2*p]=u,l[2*p+1]=d,c[h++]=m,c[h++]=g,c[h++]=p}}return f(0,0,s,s,s,0),f(s,s,0,0,0,s),{vertices:l,triangles:c}}}]),e}(),S=r("zJdk");function w(e,t){if(null===e)return null;var r=t.meshMaxError,n=t.bounds,a=t.elevationDecoder,o=e.data,s=e.width,u=s+1,l=function(e,t,r){for(var n=r.rScaler,i=r.bScaler,a=r.gScaler,o=r.offset,s=t+1,u=new Float32Array(s*s),l=0,c=0;c<t;c++)for(var h=0;h<t;h++,l++){var f=4*l,d=e[f+0],y=e[f+1],v=e[f+2];u[l+c]=d*n+y*a+v*i+o}for(var m=s*(s-1),g=0;g<s-1;g++,m++)u[m]=u[m-s];for(var p=s-1,b=0;b<s;b++,p+=s)u[p]=u[p-1];return u}(o,s,a),c=new b(u).createTile(l).getMesh(r),h=c.vertices,f=c.triangles,d=function(e,t,r,n){for(var a=r+1,o=e.length/2,s=new Float32Array(3*o),u=new Float32Array(2*o),l=n||[0,0,r,r],c=Object(i.a)(l,4),h=c[0],f=c[1],d=c[2],y=c[3],v=(d-h)/r,m=(y-f)/r,g=0;g<o;g++){var p=e[2*g],b=e[2*g+1],O=b*a+p;s[3*g+0]=p*v+h,s[3*g+1]=-b*m+y,s[3*g+2]=t[O],u[2*g+0]=p/r,u[2*g+1]=b/r}return{POSITION:{value:s,size:3},TEXCOORD_0:{value:u,size:2}}}(h,l,s,n);return{loaderData:{header:{}},header:{vertexCount:f.length,boundingBox:Object(S.a)(d)},mode:4,indices:{value:f,size:1},attributes:d}}function x(){return(x=Object(p.a)(g.a.mark((function e(t,r,n){var i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.image=r.image||{},r.image.type="data",e.next=4,n.parse(t,r,r.baseUri);case 4:return i=e.sent,e.abrupt("return",w(i,r.terrain));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=M(M({},{id:"terrain",name:"Terrain",version:"2.3.13",extensions:["png","pngraw"],mimeTypes:["image/png"],options:{terrain:{bounds:null,workerUrl:"https://unpkg.com/@loaders.gl/terrain@".concat("2.3.13","/dist/terrain-loader.worker.js"),meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0}}}}),{},{parse:function(e,t,r){return x.apply(this,arguments)}}),L=r("y9sn"),j=r("OLI5");function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var P=[1],I=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},L.a.defaultProps,{elevationData:j.d,texture:j.d,meshMaxError:{type:"number",value:4},bounds:{type:"array",value:null,optional:!0,compare:!0},color:{type:"color",value:[255,255,255]},elevationDecoder:{type:"object",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:{type:"string",value:null},wireframe:!1,material:!0});function E(e){return Array.isArray(e)?e.join(";"):e}var C=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"updateState",value:function(e){var t=e.props,r=e.oldProps,n=t.elevationData!==r.elevationData;if(n){var i=t.elevationData,a=i&&(Array.isArray(i)||i.includes("{x}")&&i.includes("{y}"));this.setState({isTiled:a})}var o=n||t.meshMaxError!==r.meshMaxError||t.elevationDecoder!==r.elevationDecoder||t.bounds!==r.bounds;if(!this.state.isTiled&&o){var s=this.loadTerrain(t);this.setState({terrain:s})}}},{key:"loadTerrain",value:function(e){var t=e.elevationData,r=e.bounds,n=e.elevationDecoder,i=e.meshMaxError,a=e.workerUrl;if(!t)return null;var o={terrain:{bounds:r,meshMaxError:i,elevationDecoder:n}};return null!==a&&(o.terrain.workerUrl=a),Object(v.a)(t,T,o)}},{key:"getTiledTerrainData",value:function(e){var t=this.props,r=t.elevationData,n=t.texture,i=t.elevationDecoder,a=t.meshMaxError,o=t.workerUrl,s=Object(j.b)(r,e),u=Object(j.b)(n,e),l=e.bbox,c=e.z,h=new d.a({longitude:(l.west+l.east)/2,latitude:(l.north+l.south)/2,zoom:c}),f=h.projectFlat([l.west,l.south]),y=h.projectFlat([l.east,l.north]),m=[f[0],f[1],y[0],y[1]],g=this.loadTerrain({elevationData:s,bounds:m,elevationDecoder:i,meshMaxError:a,workerUrl:o}),p=u?Object(v.a)(u).catch((function(e){return null})):Promise.resolve(null);return Promise.all([g,p])}},{key:"renderSubLayers",value:function(e){var t=this.getSubLayerClass("mesh",f.a),r=e.data,n=e.color;if(!r)return null;var a=Object(i.a)(r,2),o=a[0],s=a[1];return new t(e,{data:P,mesh:o,texture:s,coordinateSystem:y.a.CARTESIAN,getPosition:function(e){return[0,0,0]},getColor:n})}},{key:"onViewportLoad",value:function(e){if(e&&0!==e.length&&!e.every((function(e){return!e}))){var t=this.state.zRange,r=e.filter(Boolean).map((function(e){return e[0].header.boundingBox.map((function(e){return e[2]}))})),i=Math.min.apply(Math,Object(n.a)(r.map((function(e){return e[0]})))),a=Math.max.apply(Math,Object(n.a)(r.map((function(e){return e[1]}))));(!t||i<t[0]||a>t[1])&&this.setState({zRange:[i,a]})}}},{key:"renderLayers",value:function(){var e=this.props,t=e.color,r=e.material,n=e.elevationData,i=e.texture,a=e.wireframe,o=e.meshMaxError,s=e.elevationDecoder;return this.state.isTiled?new L.a(this.getSubLayerProps({id:"tiles"}),{wireframe:a,color:t,material:r,getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:E(n),texture:E(i),meshMaxError:o,elevationDecoder:s}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null}):new(this.getSubLayerClass("mesh",f.a))(this.getSubLayerProps({id:"mesh"}),{data:P,mesh:this.state.terrain,texture:i,_instanced:!1,getPosition:function(e){return[0,0,0]},getColor:t,material:r,wireframe:a})}}]),t}(h.a);C.layerName="TerrainLayer",C.defaultProps=I},B9OJ:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r("ToJy");var n=r("rePB"),i=r("1OyB"),a=r("vuIU"),o=r("laie");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l={id:"request-scheduler",throttleRequests:!0,maxRequests:6},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e),this.props=u(u({},l),t),this.requestQueue=[],this.activeRequestCount=0,this.requestMap=new Map,this.stats=new o.b({id:t.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever"),this._deferredUpdate=null}return Object(a.a)(e,[{key:"scheduleRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(e))return this.requestMap.get(e);var r={handle:e,getPriority:t},n=new Promise((function(e){return r.resolve=e,r}));return this.requestQueue.push(r),this.requestMap.set(e,n),this._issueNewRequests(),n}},{key:"_issueRequest",value:function(e){var t=this,r=e.handle,n=e.resolve,i=!1,a=function(){i||(i=!0,t.requestMap.delete(r),t.activeRequestCount--,t._issueNewRequests())};return this.activeRequestCount++,n?n({done:a}):Promise.resolve({done:a})}},{key:"_issueNewRequests",value:function(){var e=this;this._deferredUpdate||(this._deferredUpdate=setTimeout((function(){return e._issueNewRequestsAsync()}),0))}},{key:"_issueNewRequestsAsync",value:function(){this._deferredUpdate=null;var e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(var t=0;t<e;++t)if(this.requestQueue.length>0){var r=this.requestQueue.shift();this._issueRequest(r)}}}},{key:"_updateAllRequests",value:function(){for(var e=this.requestQueue,t=0;t<e.length;++t){var r=e[t];this._updateRequest(r)||(e.splice(t,1),this.requestMap.delete(r.handle),t--)}e.sort((function(e,t){return e.priority-t.priority}))}},{key:"_updateRequest",value:function(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}]),e}()},GA6j:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r("1OyB"),i=r("vuIU"),a=r("Ji7U"),o=r("md7G"),s=r("foSv"),u=r("fxzv"),l=r("+H0l"),c=r("sSh/"),h=r("HwUG"),f=r("ZxFD"),d=r("n+fv");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var v=Object.freeze([1,0,0,0,1,0,0,0,1]),m=Object.freeze([0,0,0,0,0,0,0,0,0]),g=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),p={},b=function(e){Object(a.a)(r,e);var t=y(r);function r(e){var i;return Object(n.a)(this,r),i=t.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?i.copy(e):i.identity(),i}return Object(i.a)(r,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return g}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}},{key:"set",value:function(e,t,r,n,i,a,o,s,u){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this[4]=i,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this.check()}},{key:"setRowMajor",value:function(e,t,r,n,i,a,o,s,u){return this[0]=e,this[1]=n,this[2]=o,this[3]=t,this[4]=i,this[5]=s,this[6]=r,this[7]=a,this[8]=u,this.check()}},{key:"determinant",value:function(){return h.b(this)}},{key:"identity",value:function(){return this.copy(v)}},{key:"fromQuaternion",value:function(e){return h.c(this,e),this.check()}},{key:"transpose",value:function(){return h.i(this,this),this.check()}},{key:"invert",value:function(){return h.d(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return h.e(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return h.e(this,this,e),this.check()}},{key:"rotate",value:function(e){return h.f(this,this,e),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?h.g(this,this,e):h.g(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return h.h(this,this,e),this.check()}},{key:"transform",value:function(e,t){switch(e.length){case 2:t=f.i(t||[-0,-0],e,this);break;case 3:t=d.o(t||[-0,-0,-0],e,this);break;case 4:t=Object(c.d)(t||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(l.b)(t,e.length),t}},{key:"transformVector",value:function(e,t){return Object(l.c)("Matrix3.transformVector"),this.transform(e,t)}},{key:"transformVector2",value:function(e,t){return Object(l.c)("Matrix3.transformVector"),this.transform(e,t)}},{key:"transformVector3",value:function(e,t){return Object(l.c)("Matrix3.transformVector"),this.transform(e,t)}}],[{key:"IDENTITY",get:function(){return p.IDENTITY=p.IDENTITY||Object.freeze(new r(v)),p.IDENTITY}},{key:"ZERO",get:function(){return p.ZERO=p.ZERO||Object.freeze(new r(m)),p.ZERO}}]),r}(u.a)},HIr8:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return h}));r("IZzc");var n=r("rpwb"),i=r("V3d6"),a=Math.PI/180,o=new Float32Array(16),s=new Float32Array(12);function u(e,t,r){var n=t[0]*a,i=t[1]*a,o=t[2]*a,s=Math.sin(o),u=Math.sin(n),l=Math.sin(i),c=Math.cos(o),h=Math.cos(n),f=Math.cos(i),d=r[0],y=r[1],v=r[2];e[0]=d*f*h,e[1]=d*l*h,e[2]=d*-u,e[3]=y*(-l*c+f*u*s),e[4]=y*(f*c+l*u*s),e[5]=y*h*s,e[6]=v*(l*s+f*u*c),e[7]=v*(-f*s+l*u*c),e[8]=v*h*c}function l(e){return e[0]=e[0],e[1]=e[1],e[2]=e[2],e[3]=e[4],e[4]=e[5],e[5]=e[6],e[6]=e[8],e[7]=e[9],e[8]=e[10],e[9]=e[12],e[10]=e[13],e[11]=e[14],e.subarray(0,12)}var c={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(e,t){var r=t.startRow,i=t.endRow,a=this.props,c=a.data,h=a.getOrientation,f=a.getScale,d=a.getTranslation,y=a.getTransformMatrix,v=Array.isArray(y),m=v&&16===y.length,g=Array.isArray(f),p=Array.isArray(h),b=Array.isArray(d),O=m||!v&&Boolean(y(c[0]));e.constant=O?m:p&&g&&b;var S=e.value;if(e.constant){var w;if(O)o.set(y),w=l(o);else u(w=s,h,f),w.set(d,9);e.value=new Float32Array(w)}else{var x=r*e.size,k=Object(n.a)(c,r,i),M=k.iterable,T=k.objectInfo,L=!0,j=!1,_=void 0;try{for(var P,I=M[Symbol.iterator]();!(L=(P=I.next()).done);L=!0){var E=P.value;T.index++;var C=void 0;if(O)o.set(m?y:y(E,T)),C=l(o);else u(C=s,p?h:h(E,T),g?f:f(E,T)),C.set(b?d:d(E,T),9);S[x++]=C[0],S[x++]=C[1],S[x++]=C[2],S[x++]=C[3],S[x++]=C[4],S[x++]=C[5],S[x++]=C[6],S[x++]=C[7],S[x++]=C[8],S[x++]=C[9],S[x++]=C[10],S[x++]=C[11]}}catch(A){j=!0,_=A}finally{try{L||null==I.return||I.return()}finally{if(j)throw _}}}}};function h(e,t){return t===i.a.CARTESIAN||t===i.a.METER_OFFSETS||t===i.a.DEFAULT&&!e.isGeospatial}},HwUG:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"i",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"e",(function(){return u})),r.d(t,"h",(function(){return l})),r.d(t,"f",(function(){return c})),r.d(t,"g",(function(){return h})),r.d(t,"c",(function(){return f}));r("IZzc"),r("QFcT");var n=r("yU0y");function i(){var e=new n.a(9);return n.a!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function a(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function o(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=c*o-s*l,f=-c*a+s*u,d=l*a-o*u,y=r*h+n*f+i*d;return y?(y=1/y,e[0]=h*y,e[1]=(-c*n+i*l)*y,e[2]=(s*n-i*o)*y,e[3]=f*y,e[4]=(c*r-i*u)*y,e[5]=(-s*r+i*a)*y,e[6]=d*y,e[7]=(-l*r+n*u)*y,e[8]=(o*r-n*a)*y,e):null}function s(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*(l*a-o*u)+r*(-l*i+o*s)+n*(u*i-a*s)}function u(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=r[0],d=r[1],y=r[2],v=r[3],m=r[4],g=r[5],p=r[6],b=r[7],O=r[8];return e[0]=f*n+d*o+y*l,e[1]=f*i+d*s+y*c,e[2]=f*a+d*u+y*h,e[3]=v*n+m*o+g*l,e[4]=v*i+m*s+g*c,e[5]=v*a+m*u+g*h,e[6]=p*n+b*o+O*l,e[7]=p*i+b*s+O*c,e[8]=p*a+b*u+O*h,e}function l(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=f*n+d*o+l,e[7]=f*i+d*s+c,e[8]=f*a+d*u+h,e}function c(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=Math.sin(r),d=Math.cos(r);return e[0]=d*n+f*o,e[1]=d*i+f*s,e[2]=d*a+f*u,e[3]=d*o-f*n,e[4]=d*s-f*i,e[5]=d*u-f*a,e[6]=l,e[7]=c,e[8]=h,e}function h(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function f(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,u=i+i,l=r*o,c=n*o,h=n*s,f=i*o,d=i*s,y=i*u,v=a*o,m=a*s,g=a*u;return e[0]=1-h-y,e[3]=c-g,e[6]=f+m,e[1]=c+g,e[4]=1-l-y,e[7]=d-v,e[2]=f-m,e[5]=d+v,e[8]=1-l-h,e}},OLI5:function(e,t,r){"use strict";r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return v})),r.d(t,"a",(function(){return g}));var n=r("ODXe"),i=r("1OyB"),a=r("vuIU"),o=r("rOwd"),s=function(){function e(t,r,n){Object(i.a)(this,e),this.x=t,this.y=r,this.z=n}return Object(a.a)(e,[{key:"update",value:function(e){var t=e.viewport,r=e.cullingVolume,n=e.elevationBounds,i=e.minZ,a=e.maxZ,o=e.offset,s=this.getBoundingVolume(n,o);if(r.computeVisibility(s)<0)return!1;if(!this.childVisible){var u=this.z;if(u<a&&u>=i){var l=s.distanceTo(t.cameraPosition)*t.scale/t.height;u+=Math.floor(Math.log2(l))}if(u>=a)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;var c=!0,h=!1,f=void 0;try{for(var d,y=this.children[Symbol.iterator]();!(c=(d=y.next()).done);c=!0){d.value.update(e)}}catch(v){h=!0,f=v}finally{try{c||null==y.return||y.return()}finally{if(h)throw f}}return!0}},{key:"getSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&e.push(this),this._children){var t=!0,r=!1,n=void 0;try{for(var i,a=this._children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.getSelected(e)}}catch(s){r=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}return e}},{key:"getBoundingVolume",value:function(e,t){var r=512/Math.pow(2,this.z),n=this.x*r+512*t,i=512-(this.y+1)*r;return new o.a([n,i,e[0]],[n+r,i+r,e[1]])}},{key:"children",get:function(){if(!this._children){var t=2*this.x,r=2*this.y,n=this.z+1;this._children=[new e(t,r,n),new e(t,r+1,n),new e(t+1,r,n),new e(t+1,r+1,n)]}return this._children}}]),e}();var u=[-1/0,-1/0,1/0,1/0],l={type:"url",value:"",validate:function(e){return"string"==typeof e||Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))},equals:function(e,t){if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function c(e,t){if(!e||!e.length)return null;Array.isArray(e)&&(e=e[Math.abs(t.x+t.y)%e.length]);return e.replace?e.replace(/\{ *([\w_-]+) *\}/g,(function(e,r){return t[r]})):null}function h(e,t){var r=Object(n.a)(e,2);return[r[0]*t/512,r[1]*t/512]}function f(e){return Math.pow(2,e)}function d(e,t,r){var n=f(r),i=e/n*360-180,a=Math.PI-2*Math.PI*t/n;return[i,180/Math.PI*Math.atan(.5*(Math.exp(a)-Math.exp(-a)))]}function y(e,t,r){var n=f(r);return[e/n*512,t/n*512]}function v(e,t,r,i){if(e.isGeospatial){var a=d(t,r,i),o=Object(n.a)(a,2),s=o[0],u=o[1],l=d(t+1,r+1,i),c=Object(n.a)(l,2);return{west:s,north:u,east:c[0],south:c[1]}}var h=y(t,r,i),f=Object(n.a)(h,2),v=f[0],m=f[1],g=y(t+1,r+1,i),p=Object(n.a)(g,2);return{left:v,top:m,right:p[0],bottom:p[1]}}function m(e,t,r){for(var i=function(e,t,r){var i;if(t&&2===t.length){var a=Object(n.a)(t,2),o=a[0],s=a[1],u=e.getBounds({z:o}),l=e.getBounds({z:s});i=[Math.min(u[0],l[0]),Math.min(u[1],l[1]),Math.max(u[2],l[2]),Math.max(u[3],l[3])]}else i=e.getBounds();return[Math.max(i[0],r[0]),Math.max(i[1],r[1]),Math.min(i[2],r[2]),Math.min(i[3],r[3])]}(e,null,r),a=f(t),o=h([i[0],i[1]],a),s=Object(n.a)(o,2),u=s[0],l=s[1],c=h([i[2],i[3]],a),d=Object(n.a)(c,2),y=d[0],v=d[1],m=[],g=Math.floor(u);g<y;g++)for(var p=Math.floor(l);p<v;p++)m.push({x:g,y:p,z:t});return m}function g(e){var t=e.viewport,r=e.maxZoom,n=e.minZoom,i=e.zRange,a=e.extent,l=e.tileSize,c=void 0===l?512:l,h=Math.round(t.zoom+Math.log2(512/c));if(Number.isFinite(n)&&h<n){if(!a)return[];h=n}return Number.isFinite(r)&&h>r&&(h=r),t.isGeospatial?function(e,t,r){var n=Object.values(e.getFrustumPlanes()).map((function(e){var t=e.normal,r=e.distance;return new o.e(t.clone().negate(),r)})),i=new o.c(n),a=e.distanceScales.unitsPerMeter[2],u=r&&r[0]*a||0,l=r&&r[1]*a||0,c=e.pitch<=60?t:0,h=new s(0,0,0),f={viewport:e,cullingVolume:i,elevationBounds:[u,l],minZ:c,maxZ:t,offset:0};if(h.update(f),e.subViewports&&e.subViewports.length>1){for(f.offset=-1;h.update(f)&&!(--f.offset<-3););for(f.offset=1;h.update(f)&&!(++f.offset>3););}return h.getSelected()}(t,h,i):m(t,h,a||u)}},Xjzu:function(e,t,r){"use strict";r.d(t,"a",(function(){return z}));var n=r("1OyB"),i=r("vuIU"),a=r("Ji7U"),o=r("md7G"),s=r("foSv"),u=r("41X0"),l=r("+H0l"),c=r("tS8E"),h=(r("IZzc"),r("yU0y")),f=r("HwUG"),d=r("n+fv"),y=r("bl9R");function v(){var e=new h.a(4);return h.a!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function m(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function g(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=r[0],u=r[1],l=r[2],c=r[3];return e[0]=n*c+o*s+i*l-a*u,e[1]=i*c+o*u+a*s-n*l,e[2]=a*c+o*l+n*u-i*s,e[3]=o*c-n*s-i*u-a*l,e}function p(e,t,r,n){var i,a,o,s,u,l=t[0],c=t[1],f=t[2],d=t[3],y=r[0],v=r[1],m=r[2],g=r[3];return(a=l*y+c*v+f*m+d*g)<0&&(a=-a,y=-y,v=-v,m=-m,g=-g),1-a>h.b?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,u=Math.sin(n*i)/o):(s=1-n,u=n),e[0]=s*l+u*y,e[1]=s*c+u*v,e[2]=s*f+u*m,e[3]=s*d+u*g,e}function b(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*a+o]-t[3*o+a])*r,e[a]=(t[3*a+i]+t[3*i+a])*r,e[o]=(t[3*o+i]+t[3*i+o])*r}return e}y.b,y.g,y.c,y.l;var O,S,w,x,k,M,T=y.a,L=y.k,j=y.d,_=y.i,P=y.h,I=y.m,E=y.j,C=(y.f,y.e,O=d.c(),S=d.f(1,0,0),w=d.f(0,1,0),function(e,t,r){var n=d.e(t,r);return n<-.999999?(d.d(O,S,t),d.g(O)<1e-6&&d.d(O,w,t),d.k(O,O),m(e,O,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(d.d(O,t,r),e[0]=O[0],e[1]=O[1],e[2]=O[2],e[3]=1+n,E(e,e))});x=v(),k=v(),M=f.a();function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var R=[0,0,0,1],z=function(e){Object(a.a)(r,e);var t=A(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(n.a)(this,r),e=t.call(this,-0,-0,-0,-0),Array.isArray(i)&&1===arguments.length?e.copy(i):e.set(i,a,o,s),e}return Object(i.a)(r,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}},{key:"set",value:function(e,t,r,n){return this[0]=e,this[1]=t,this[2]=r,this[3]=n,this.check()}},{key:"fromMatrix3",value:function(e){return b(this,e),this.check()}},{key:"identity",value:function(){var e;return(e=this)[0]=0,e[1]=0,e[2]=0,e[3]=1,this.check()}},{key:"fromAxisRotation",value:function(e,t){return m(this,e,t),this.check()}},{key:"setAxisAngle",value:function(e,t){return this.fromAxisRotation(e,t)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){this[0]=Object(l.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=Object(l.a)(e)}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=Object(l.a)(e)}},{key:"w",get:function(){return this[3]},set:function(e){this[3]=Object(l.a)(e)}},{key:"len",value:function(){return P(this)}},{key:"lengthSquared",value:function(){return I(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return j(this,e)}},{key:"rotationTo",value:function(e,t){return C(this,e,t),this.check()}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return T(this,this,e),this.check()}},{key:"calculateW",value:function(){var e,t,r,n,i;return e=this,r=(t=this)[0],n=t[1],i=t[2],e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),this.check()}},{key:"conjugate",value:function(){var e,t;return t=this,(e=this)[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],this.check()}},{key:"invert",value:function(){var e,t,r,n,i,a,o,s;return e=this,r=(t=this)[0],n=t[1],i=t[2],a=t[3],s=(o=r*r+n*n+i*i+a*a)?1/o:0,e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=a*s,this.check()}},{key:"lerp",value:function(e,t,r){return _(this,e,t,r),this.check()}},{key:"multiplyRight",value:function(e,t){return Object(c.a)(!t),g(this,this,e),this.check()}},{key:"multiplyLeft",value:function(e,t){return Object(c.a)(!t),g(this,e,this),this.check()}},{key:"normalize",value:function(){var e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}},{key:"rotateX",value:function(e){return function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),u=Math.cos(r);e[0]=n*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-n*s}(this,this,e),this.check()}},{key:"rotateY",value:function(e){return function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),u=Math.cos(r);e[0]=n*u-a*s,e[1]=i*u+o*s,e[2]=a*u+n*s,e[3]=o*u-i*s}(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),u=Math.cos(r);e[0]=n*u+i*s,e[1]=i*u-n*s,e[2]=a*u+o*s,e[3]=o*u-a*s}(this,this,e),this.check()}},{key:"scale",value:function(e){return L(this,this,e),this.check()}},{key:"slerp",value:function(e,t,r){switch(arguments.length){case 1:var n=arguments[0],i=n.start;e=void 0===i?R:i,t=n.target,r=n.ratio;break;case 2:var a=Array.prototype.slice.call(arguments);t=a[0],r=a[1],e=this}return p(this,e,t,r),this.check()}},{key:"transformVector4",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return y.o(t,e,this),Object(l.b)(t,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(e,t){return this.setAxisAngle(e,t)}},{key:"premultiply",value:function(e,t){return this.multiplyLeft(e,t)}},{key:"multiply",value:function(e,t){return this.multiplyRight(e,t)}}]),r}(u.a)},cwYr:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r("1OyB"),i=r("vuIU"),a=r("md7G"),o=r("foSv"),s=r("Ji7U"),u=r("Jh/b"),l=r("5lV4"),c=r("+7vx"),h=r("ctuC"),f=r("KHNG"),d=r("Im0j");function y(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},i=r.startRow,a=void 0===i?0:i,o=r.endRow,s=void 0===o?e.length:o,l=a;l<s;l++){var c=e[l];u.a.assert(c&&c.geometry,"GeoJSON does not have geometry");var h=c.geometry;if("GeometryCollection"===h.type){u.a.assert(Array.isArray(h.geometries),"GeoJSON does not have geometries array");for(var f=h.geometries,d=0;d<f.length;d++){var y=f[d];v(y,n,t,c,l)}}else v(h,n,t,c,l)}return n}function v(e,t,r,n,i){var a=e.type,o=e.coordinates,s=t.pointFeatures,l=t.lineFeatures,c=t.polygonFeatures,h=t.polygonOutlineFeatures;if(function(e,t){var r=m[e];u.a.assert(r,"Unknown GeoJSON type ".concat(e));for(;t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}(a,o))switch(a){case"Point":s.push(r({geometry:e},n,i));break;case"MultiPoint":o.forEach((function(e){s.push(r({geometry:{type:"Point",coordinates:e}},n,i))}));break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":o.forEach((function(e){l.push(r({geometry:{type:"LineString",coordinates:e}},n,i))}));break;case"Polygon":c.push(r({geometry:e},n,i)),o.forEach((function(e){h.push(r({geometry:{type:"LineString",coordinates:e}},n,i))}));break;case"MultiPolygon":o.forEach((function(e){c.push(r({geometry:{type:"Polygon",coordinates:e}},n,i)),e.forEach((function(e){h.push(r({geometry:{type:"LineString",coordinates:e}},n,i))}))}))}else u.a.warn("".concat(a," coordinates are malformed"))()}var m={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};var g={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusUnits:"meters",pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:{type:"accessor",value:[0,0,0,255]},getFillColor:{type:"accessor",value:[0,0,0,255]},getRadius:{type:"accessor",value:1},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};function p(e){return e.geometry.coordinates}var b=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"initializeState",value:function(){this.state={features:{}},this.props.getLineDashArray&&u.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var t=e.props,r=e.changeFlags;if(r.dataChanged){var n=function(e){if(Array.isArray(e))return e;switch(u.a.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return u.a.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}(t.data),i=this.getSubLayerRow.bind(this);if(Array.isArray(r.dataChanged)){var a=this.state.features,o={},s={};for(var l in a)o[l]=a[l].slice(),s[l]=[];var c=!0,h=!1,f=void 0;try{for(var v,m=r.dataChanged[Symbol.iterator]();!(c=(v=m.next()).done);c=!0){var g=v.value,p=y(n,i,g);for(var b in a)s[b].push(Object(d.a)({data:o[b],getIndex:function(e){return e.__source.index},dataRange:g,replace:p[b]}))}}catch(O){h=!0,f=O}finally{try{c||null==m.return||m.return()}finally{if(h)throw f}}this.setState({features:o,featuresDiff:s})}else this.setState({features:y(n,i),featuresDiff:{}})}}},{key:"renderLayers",value:function(){var e=this.state,t=e.features,r=e.featuresDiff,n=t.pointFeatures,i=t.lineFeatures,a=t.polygonFeatures,o=t.polygonOutlineFeatures,s=this.props,u=s.stroked,l=s.filled,d=s.extruded,y=s.wireframe,v=s.material,m=s.transitions,g=this.props,b=g.lineWidthUnits,O=g.lineWidthScale,S=g.lineWidthMinPixels,w=g.lineWidthMaxPixels,x=g.lineJointRounded,k=g.lineMiterLimit,M=g.pointRadiusUnits,T=g.pointRadiusScale,L=g.pointRadiusMinPixels,j=g.pointRadiusMaxPixels,_=g.elevationScale,P=g.lineDashJustified,I=this.props,E=I.getLineColor,C=I.getFillColor,A=I.getRadius,R=I.getLineWidth,z=I.getLineDashArray,D=I.getElevation,N=I.updateTriggers,F=this.getSubLayerClass("polygons-fill",f.a),q=this.getSubLayerClass("polygons-stroke",h.a),U=this.getSubLayerClass("line-strings",h.a),B=this.getSubLayerClass("points",c.a),V=this.shouldRenderSubLayer("polygons-fill",a)&&new F({_dataDiff:r.polygonFeatures&&function(){return r.polygonFeatures},extruded:d,elevationScale:_,filled:l,wireframe:y,material:v,getElevation:this.getSubLayerAccessor(D),getFillColor:this.getSubLayerAccessor(C),getLineColor:this.getSubLayerAccessor(E),transitions:m&&{getPolygon:m.geometry,getElevation:m.getElevation,getFillColor:m.getFillColor,getLineColor:m.getLineColor}},this.getSubLayerProps({id:"polygons-fill",updateTriggers:{getElevation:N.getElevation,getFillColor:N.getFillColor,getLineColor:N.getLineColor}}),{data:a,getPolygon:p});return[!d&&V,!d&&u&&this.shouldRenderSubLayer("polygons-stroke",o)&&new q({_dataDiff:r.polygonOutlineFeatures&&function(){return r.polygonOutlineFeatures},widthUnits:b,widthScale:O,widthMinPixels:S,widthMaxPixels:w,rounded:x,miterLimit:k,dashJustified:P,getColor:this.getSubLayerAccessor(E),getWidth:this.getSubLayerAccessor(R),getDashArray:this.getSubLayerAccessor(z),transitions:m&&{getPath:m.geometry,getColor:m.getLineColor,getWidth:m.getLineWidth}},this.getSubLayerProps({id:"polygons-stroke",updateTriggers:{getColor:N.getLineColor,getWidth:N.getLineWidth,getDashArray:N.getLineDashArray}}),{data:o,getPath:p}),this.shouldRenderSubLayer("linestrings",i)&&new U({_dataDiff:r.lineFeatures&&function(){return r.lineFeatures},widthUnits:b,widthScale:O,widthMinPixels:S,widthMaxPixels:w,rounded:x,miterLimit:k,dashJustified:P,getColor:this.getSubLayerAccessor(E),getWidth:this.getSubLayerAccessor(R),getDashArray:this.getSubLayerAccessor(z),transitions:m&&{getPath:m.geometry,getColor:m.getLineColor,getWidth:m.getLineWidth}},this.getSubLayerProps({id:"line-strings",updateTriggers:{getColor:N.getLineColor,getWidth:N.getLineWidth,getDashArray:N.getLineDashArray}}),{data:i,getPath:p}),this.shouldRenderSubLayer("points",n)&&new B({_dataDiff:r.pointFeatures&&function(){return r.pointFeatures},stroked:u,filled:l,radiusUnits:M,radiusScale:T,radiusMinPixels:L,radiusMaxPixels:j,lineWidthUnits:b,lineWidthScale:O,lineWidthMinPixels:S,lineWidthMaxPixels:w,getFillColor:this.getSubLayerAccessor(C),getLineColor:this.getSubLayerAccessor(E),getRadius:this.getSubLayerAccessor(A),getLineWidth:this.getSubLayerAccessor(R),transitions:m&&{getPosition:m.geometry,getFillColor:m.getFillColor,getLineColor:m.getLineColor,getRadius:m.getRadius,getLineWidth:m.getLineWidth}},this.getSubLayerProps({id:"points",updateTriggers:{getFillColor:N.getFillColor,getLineColor:N.getLineColor,getRadius:N.getRadius,getLineWidth:N.getLineWidth}}),{data:n,getPosition:p,highlightedObjectIndex:this._getHighlightedIndex(n)}),d&&V]}},{key:"_getHighlightedIndex",value:function(e){var t=this.props.highlightedObjectIndex;return Number.isFinite(t)?e.findIndex((function(e){return e.__source.index===t})):null}}]),t}(l.a);b.layerName="GeoJsonLayer",b.defaultProps=g},gOKY:function(e,t,r){"use strict";t.a={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},rOwd:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"d",(function(){return C})),r.d(t,"c",(function(){return Z})),r.d(t,"e",(function(){return N}));var n=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),i=r("1OyB"),a=r("vuIU"),o=r("zXfU"),s=new o.a,u=new o.a,l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(i.a)(this,e),n=n||s.copy(t).add(r).scale(.5),this.center=new o.a(n),this.halfDiagonal=new o.a(r).subtract(this.center),this.minimum=new o.a(t),this.maximum=new o.a(r)}return Object(a.a)(e,[{key:"clone",value:function(){return new e(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}},{key:"transform",value:function(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}},{key:"intersectPlane",value:function(e){var t=this.halfDiagonal,r=u.from(e.normal),i=t.x*Math.abs(r.x)+t.y*Math.abs(r.y)+t.z*Math.abs(r.z),a=this.center.dot(r)+e.distance;return a-i>0?n.INSIDE:a+i<0?n.OUTSIDE:n.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var t,r=s.from(e).subtract(this.center),n=this.halfDiagonal,i=0;return(t=Math.abs(r.x)-n.x)>0&&(i+=t*t),(t=Math.abs(r.y)-n.y)>0&&(i+=t*t),(t=Math.abs(r.z)-n.z)>0&&(i+=t*t),i}}]),e}(),c=r("ZaHm"),h=new o.a,f=new o.a,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(i.a)(this,e),this.radius=-0,this.center=new o.a,this.fromCenterRadius(t,r)}return Object(a.a)(e,[{key:"fromCenterRadius",value:function(e,t){return this.center.from(e),this.radius=t,this}},{key:"fromCornerPoints",value:function(e,t){return t=h.from(t),this.center=(new o.a).from(e).add(t).scale(.5),this.radius=this.center.distance(t),this}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}},{key:"clone",value:function(){return new e(this.center,this.radius)}},{key:"union",value:function(e){var t=this.center,r=this.radius,n=e.center,i=e.radius,a=h.copy(n).subtract(t),o=a.magnitude();if(r>=o+i)return this.clone();if(i>=o+r)return e.clone();var s=.5*(r+o+i);return f.copy(a).scale((-r+s)/o).add(t),this.center.copy(f),this.radius=s,this}},{key:"expand",value:function(e){var t=(e=h.from(e)).subtract(this.center).magnitude();return t>this.radius&&(this.radius=t),this}},{key:"transform",value:function(e){this.center.transform(e);var t=c.e(h,e);return this.radius=Math.max(t[0],Math.max(t[1],t[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(e){var t=this.distanceTo(e);return t*t}},{key:"distanceTo",value:function(e){var t=(e=h.from(e)).subtract(this.center);return Math.max(0,t.len()-this.radius)}},{key:"intersectPlane",value:function(e){var t=this.center,r=this.radius,i=e.normal.dot(t)+e.distance;return i<-r?n.OUTSIDE:i<r?n.INTERSECTING:n.INSIDE}}]),e}(),y=r("KQm4"),v=r("GA6j"),m=r("Xjzu"),g=new o.a,p=new o.a,b=new o.a,O=new o.a,S=new o.a,w=new o.a,x=new o.a,k=0,M=1,T=2,L=3,j=4,_=5,P=6,I=7,E=8,C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];Object(i.a)(this,e),this.center=(new o.a).from(t),this.halfAxes=new v.a(r)}return Object(a.a)(e,[{key:"halfSize",get:function(){var e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2);return[new o.a(e).len(),new o.a(t).len(),new o.a(r).len()]}},{key:"quaternion",get:function(){var e=this.halfAxes.getColumn(0),t=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2),n=new o.a(e).normalize(),i=new o.a(t).normalize(),a=new o.a(r).normalize();return(new m.a).fromMatrix3(new v.a([].concat(Object(y.a)(n),Object(y.a)(i),Object(y.a)(a))))}},{key:"fromCenterHalfSizeQuaternion",value:function(e,t,r){var n=new m.a(r),i=(new v.a).fromQuaternion(n);return i[0]=i[0]*t[0],i[1]=i[1]*t[0],i[2]=i[2]*t[0],i[3]=i[3]*t[1],i[4]=i[4]*t[1],i[5]=i[5]*t[1],i[6]=i[6]*t[2],i[7]=i[7]*t[2],i[8]=i[8]*t[2],this.center=(new o.a).from(e),this.halfAxes=i,this}},{key:"clone",value:function(){return new e(this.center,this.halfAxes)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}},{key:"getBoundingSphere",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new d,t=this.halfAxes,r=t.getColumn(0,b),n=t.getColumn(1,O),i=t.getColumn(2,S),a=g.copy(r).add(n).add(i);return e.center.copy(this.center),e.radius=a.magnitude(),e}},{key:"intersectPlane",value:function(e){var t=this.center,r=e.normal,i=this.halfAxes,a=r.x,o=r.y,s=r.z,u=Math.abs(a*i[k]+o*i[M]+s*i[T])+Math.abs(a*i[L]+o*i[j]+s*i[_])+Math.abs(a*i[P]+o*i[I]+s*i[E]),l=r.dot(t)+e.distance;return l<=-u?n.OUTSIDE:l>=u?n.INSIDE:n.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var t=p.from(e).subtract(this.center),r=this.halfAxes,n=r.getColumn(0,b),i=r.getColumn(1,O),a=r.getColumn(2,S),o=n.magnitude(),s=i.magnitude(),u=a.magnitude();n.normalize(),i.normalize(),a.normalize();var l,c=0;return(l=Math.abs(t.dot(n))-o)>0&&(c+=l*l),(l=Math.abs(t.dot(i))-s)>0&&(c+=l*l),(l=Math.abs(t.dot(a))-u)>0&&(c+=l*l),c}},{key:"computePlaneDistances",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=this.center,o=this.halfAxes,s=o.getColumn(0,b),u=o.getColumn(1,O),l=o.getColumn(2,S),c=w.copy(s).add(u).add(l).add(a),h=x.copy(c).subtract(e),f=t.dot(h);return n=Math.min(f,n),i=Math.max(f,i),c.copy(a).add(s).add(u).subtract(l),h.copy(c).subtract(e),f=t.dot(h),n=Math.min(f,n),i=Math.max(f,i),c.copy(a).add(s).subtract(u).add(l),h.copy(c).subtract(e),f=t.dot(h),n=Math.min(f,n),i=Math.max(f,i),c.copy(a).add(s).subtract(u).subtract(l),h.copy(c).subtract(e),f=t.dot(h),n=Math.min(f,n),i=Math.max(f,i),a.copy(c).subtract(s).add(u).add(l),h.copy(c).subtract(e),f=t.dot(h),n=Math.min(f,n),i=Math.max(f,i),a.copy(c).subtract(s).add(u).subtract(l),h.copy(c).subtract(e),f=t.dot(h),n=Math.min(f,n),i=Math.max(f,i),a.copy(c).subtract(s).subtract(u).add(l),h.copy(c).subtract(e),f=t.dot(h),n=Math.min(f,n),i=Math.max(f,i),a.copy(c).subtract(s).subtract(u).subtract(l),h.copy(c).subtract(e),f=t.dot(h),n=Math.min(f,n),i=Math.max(f,i),r[0]=n,r[1]=i,r}},{key:"transform",value:function(e){this.center.transformAsPoint(e);var t=this.halfAxes.getColumn(0,b);t.transformAsPoint(e);var r=this.halfAxes.getColumn(1,O);r.transformAsPoint(e);var n=this.halfAxes.getColumn(2,S);return n.transformAsPoint(e),this.halfAxes=new v.a([].concat(Object(y.a)(t),Object(y.a)(r),Object(y.a)(n))),this}},{key:"getTransform",value:function(){throw new Error("not implemented")}}]),e}(),A=r("tS8E"),R=r("a3TU"),z=new o.a,D=new o.a,N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(i.a)(this,e),this.normal=new o.a,this.distance=-0,this.fromNormalDistance(t,r)}return Object(a.a)(e,[{key:"fromNormalDistance",value:function(e,t){return Object(A.a)(Number.isFinite(t)),this.normal.from(e).normalize(),this.distance=t,this}},{key:"fromPointNormal",value:function(e,t){e=z.from(e),this.normal.from(t).normalize();var r=-this.normal.dot(e);return this.distance=r,this}},{key:"fromCoefficients",value:function(e,t,r,n){return this.normal.set(e,t,r),Object(A.a)(Object(R.d)(this.normal.len(),1)),this.distance=n,this}},{key:"clone",value:function(t){return new e(this.normal,this.distance)}},{key:"equals",value:function(e){return Object(R.d)(this.distance,e.distance)&&Object(R.d)(this.normal,e.normal)}},{key:"getPointDistance",value:function(e){return this.normal.dot(e)+this.distance}},{key:"transform",value:function(e){var t=D.copy(this.normal).transformAsVector(e).normalize(),r=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(r,t)}},{key:"projectPointOntoPlane",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];e=z.from(e);var r=this.getPointDistance(e),n=D.copy(this.normal).scale(r);return e.subtract(n).to(t)}}]),e}();function F(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var U=[new o.a([1,0,0]),new o.a([0,1,0]),new o.a([0,0,1])],B=new o.a,V=new o.a,Z=(new N(new o.a(1,0,0),0),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(i.a)(this,e),this.planes=t,Object(A.a)(this.planes.every((function(e){return e instanceof N})))}return Object(a.a)(e,[{key:"fromBoundingSphere",value:function(e){this.planes.length=2*U.length;var t,r=e.center,n=e.radius,i=0,a=F(U);try{for(a.s();!(t=a.n()).done;){var o=t.value,s=this.planes[i],u=this.planes[i+1];s||(s=this.planes[i]=new N),u||(u=this.planes[i+1]=new N);var l=B.copy(o).scale(-n).add(r);o.dot(l);s.fromPointNormal(l,o);var c=B.copy(o).scale(n).add(r),h=V.copy(o).negate();h.dot(c);u.fromPointNormal(c,h),i+=2}}catch(f){a.e(f)}finally{a.f()}return this}},{key:"computeVisibility",value:function(e){Object(A.a)(e);var t,r=n.INSIDE,i=F(this.planes);try{for(i.s();!(t=i.n()).done;){var a=t.value;switch(e.intersectPlane(a)){case n.OUTSIDE:return n.OUTSIDE;case n.INTERSECTING:r=n.INTERSECTING}}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"computeVisibilityWithPlaneMask",value:function(t,r){if(Object(A.a)(t,"boundingVolume is required."),Object(A.a)(Number.isFinite(r),"parentPlaneMask is required."),r===e.MASK_OUTSIDE||r===e.MASK_INSIDE)return r;for(var i=e.MASK_INSIDE,a=this.planes,o=0;o<this.planes.length;++o){var s=o<31?1<<o:0;if(!(o<31&&0==(r&s))){var u=a[o],l=t.intersectPlane(u);if(l===n.OUTSIDE)return e.MASK_OUTSIDE;l===n.INTERSECTING&&(i|=s)}}return i}}],[{key:"MASK_OUTSIDE",get:function(){return 4294967295}},{key:"MASK_INSIDE",get:function(){return 0}},{key:"MASK_INDETERMINATE",get:function(){return 2147483647}}]),e}());r("rePB"),r("Nw31");new o.a,new o.a,new o.a,new o.a,new o.a;new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,Math.PI;r("gOKY"),new v.a,new v.a,new v.a,new v.a,new v.a;new o.a,new o.a,new o.a,new o.a,new o.a,new v.a,new v.a,new v.a},y9sn:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var n=r("1OyB"),i=r("vuIU"),a=r("md7G"),o=r("foSv"),s=r("Ji7U"),u=r("Zk56"),l=r("5lV4"),c=r("cwYr"),h=(r("ToJy"),r("ODXe")),f=r("o0o1"),d=r.n(f),y=r("HaE+"),v=r("Jh/b"),m=function(){function e(t){var r=t.x,i=t.y,a=t.z,o=t.onTileLoad,s=t.onTileError;Object(n.a)(this,e),this.x=r,this.y=i,this.z=a,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._isLoaded=!1,this._isCancelled=!1,this.onTileLoad=o,this.onTileError=s}var t;return Object(i.a)(e,[{key:"_loadData",value:(t=Object(y.a)(d.a.mark((function e(t,r){var n,i,a,o,s,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.x,i=this.y,a=this.z,o=this.bbox,e.next=3,r.scheduleRequest(this,(function(e){return e.isSelected?1:-1}));case 3:if(s=e.sent){e.next=7;break}return this._isCancelled=!0,e.abrupt("return");case 7:return this._isCancelled=!1,e.prev=8,e.next=11,t({x:n,y:i,z:a,bbox:o});case 11:u=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),l=e.t0||!0;case 17:return e.prev=17,s.done(),this._isLoaded=!0,e.finish(17);case 21:l?this.onTileError(l,this):(this.content=u,this.onTileLoad(this));case 22:case"end":return e.stop()}}),e,this,[[8,14,17,21]])}))),function(e,r){return t.apply(this,arguments)})},{key:"loadData",value:function(e,t){e&&(this._loader=this._loadData(e,t))}},{key:"data",get:function(){return this._isLoaded?this.content:this._loader}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"isCancelled",get:function(){return this._isCancelled}},{key:"byteLength",get:function(){var e=this.content?this.content.byteLength:0;return Number.isFinite(e)||v.a.error("byteLength not defined in tile data")(),e}}]),e}(),g=r("OLI5"),p=r("B9OJ"),b=function(){function e(t){var r=this;Object(n.a)(this,e),this.opts=t,this._getTileData=t.getTileData,this.onTileError=t.onTileError,this.onTileLoad=function(e){t.onTileLoad(e),r.opts.maxCacheByteSize&&(r._cacheByteSize+=e.byteLength,r._resizeCache())},this._requestScheduler=new p.a({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this.setOptions(t)}return Object(i.a)(e,[{key:"setOptions",value:function(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}},{key:"update",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.zRange;if(!e.equals(this._viewport)){this._viewport=e;var i=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:n});this._selectedTiles=i.map((function(e){return t._getTile(e,!0)})),this._dirty&&this._rebuildTree()}var a=this.updateTileStates();return this._dirty&&this._resizeCache(),a&&this._frameNumber++,this._frameNumber}},{key:"getTileIndices",value:function(e){var t=e.viewport,r=e.maxZoom,n=e.minZoom,i=e.zRange,a=this.opts,o=a.tileSize,s=a.extent;return Object(g.a)({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:o,extent:s})}},{key:"getTileMetadata",value:function(e){var t=e.x,r=e.y,n=e.z;return{bbox:Object(g.c)(this._viewport,t,r,n)}}},{key:"getParentIndex",value:function(e){return e.x=Math.floor(e.x/2),e.y=Math.floor(e.y/2),e.z-=1,e}},{key:"updateTileStates",value:function(){this._updateTileStates(this.selectedTiles);var e=!1,t=!0,r=!1,n=void 0;try{for(var i,a=this._cache.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=Boolean(1&o.state);o.isVisible!==s&&(e=!0,o.isVisible=s),o.isSelected=5===o.state}}catch(u){r=!0,n=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e}},{key:"_rebuildTree",value:function(){var e=this._cache,t=!0,r=!1,n=void 0;try{for(var i,a=e.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.parent=null,o.children.length=0}}catch(y){r=!0,n=y}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}var s=!0,u=!1,l=void 0;try{for(var c,h=e.values()[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=c.value,d=this._getNearestAncestor(f.x,f.y,f.z);f.parent=d,d&&d.children.push(f)}}catch(y){u=!0,l=y}finally{try{s||null==h.return||h.return()}finally{if(u)throw l}}}},{key:"_updateTileStates",value:function(e){var t=this._cache,r=this.opts.refinementStrategy||"best-available",n=!0,i=!1,a=void 0;try{for(var o,s=t.values()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.state=0}}catch(L){i=!0,a=L}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}var u=!0,l=!1,c=void 0;try{for(var h,f=e[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){h.value.state=5}}catch(L){l=!0,c=L}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}if("never"!==r){var d=!0,y=!1,v=void 0;try{for(var m,g=e[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){S(m.value,r)}}catch(L){y=!0,v=L}finally{try{d||null==g.return||g.return()}finally{if(y)throw v}}var p=!0,b=!1,x=void 0;try{for(var k,M=e[Symbol.iterator]();!(p=(k=M.next()).done);p=!0){var T=k.value;O(T)&&w(T)}}catch(L){b=!0,x=L}finally{try{p||null==M.return||M.return()}finally{if(b)throw x}}}}},{key:"_resizeCache",value:function(){var e=this._cache,t=this.opts,r=t.maxCacheSize||(t.maxCacheByteSize?1/0:5*this.selectedTiles.length),n=t.maxCacheByteSize||1/0;if(e.size>r||this._cacheByteSize>n){var i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=Object(h.a)(s.value,2),c=l[0],f=l[1];if(f.isVisible||(this._cacheByteSize-=t.maxCacheByteSize?f.byteLength:0,e.delete(c)),e.size<=r&&this._cacheByteSize<=n)break}}catch(d){a=!0,o=d}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((function(e,t){return e.z-t.z})),this._dirty=!1)}},{key:"_getTile",value:function(e,t){var r=e.x,n=e.y,i=e.z,a="".concat(r,",").concat(n,",").concat(i),o=this._cache.get(a);return!o&&t?(o=new m({x:r,y:n,z:i,onTileLoad:this.onTileLoad,onTileError:this.onTileError}),Object.assign(o,this.getTileMetadata(o)),o.loadData(this._getTileData,this._requestScheduler),this._cache.set(a,o),this._dirty=!0):o&&o.isCancelled&&o.loadData(this._getTileData,this._requestScheduler),o}},{key:"_getNearestAncestor",value:function(e,t,r){for(var n=this._minZoom,i=void 0===n?0:n,a={x:e,y:t,z:r};a.z>i;){a=this.getParentIndex(a);var o=this._getTile(a);if(o)return o}return null}},{key:"tiles",get:function(){return this._tiles}},{key:"selectedTiles",get:function(){return this._selectedTiles}},{key:"isLoaded",get:function(){return this._selectedTiles.every((function(e){return e.isLoaded}))}}]),e}();function O(e){for(var t=e;t;){if(!1&t.state)return!0;if(t.isLoaded)return!1;t=t.parent}return!0}function S(e,t){for(var r,n=3;r=e.parent;){if(e.isLoaded&&(n=4,"best-available"===t))return;r.state=Math.max(r.state,n),e=r}}function w(e){var t=!0,r=!1,n=void 0;try{for(var i,a=e.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o.state=Math.max(o.state,3),o.isLoaded||w(o)}}catch(s){r=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}var x={data:[],dataComparator:g.d.equals,renderSubLayers:{type:"function",value:function(e){return new c.a(e)},compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:function(e){},compare:!1},onTileError:{type:"function",value:function(e){return console.error(e)},compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:8},k=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"initializeState",value:function(){this.state={tiles:[],isLoaded:!1}}},{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=e.props,r=(e.oldProps,e.context,e.changeFlags),n=this.state.tileset;if(!n||r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getTileData)){var i=t.maxZoom,a=t.minZoom,o=t.tileSize,s=t.maxCacheSize,u=t.maxCacheByteSize,l=t.refinementStrategy,c=t.extent,h=t.maxRequests;n=new b({getTileData:this.getTileData.bind(this),maxCacheSize:s,maxCacheByteSize:u,maxZoom:i,minZoom:a,tileSize:o,refinementStrategy:l,extent:c,onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),maxRequests:h}),this.setState({tileset:n})}else(r.propsChanged||r.updateTriggersChanged)&&(n.setOptions(t),this.state.tileset.tiles.forEach((function(e){e.layers=null})));this._updateTileset()}},{key:"_updateTileset",value:function(){var e=this.state.tileset,t=this.props,r=t.onViewportLoad,n=t.zRange,i=e.update(this.context.viewport,{zRange:n}),a=e.isLoaded,o=this.state.isLoaded!==a,s=this.state.frameNumber!==i;a&&r&&(o||s)&&r(e.selectedTiles.map((function(e){return e.data}))),s&&this.setState({frameNumber:i}),this.state.isLoaded=a}},{key:"_onTileLoad",value:function(e){this.getCurrentLayer().props.onTileLoad(e),e.isVisible&&this.setNeedsUpdate()}},{key:"_onTileError",value:function(e,t){var r=this.getCurrentLayer();r.props.onTileError(e),r._updateTileset(),t.isVisible&&this.setNeedsUpdate()}},{key:"getTileData",value:function(e){var t=this.props,r=t.getTileData,n=t.fetch,i=t.data;return e.url=Object(g.b)(i,e),r?r(e):e.url?n(e.url,{layer:this}):null}},{key:"renderSubLayers",value:function(e){return this.props.renderSubLayers(e)}},{key:"getHighlightedObjectIndex",value:function(){return-1}},{key:"getPickingInfo",value:function(e){var t=e.info,r=e.sourceLayer;return t.sourceLayer=r,t.tile=r.props.tile,t}},{key:"renderLayers",value:function(){var e=this,t=this.props.visible;return this.state.tileset.tiles.map((function(r){var n=t&&r.isVisible,i=e.getHighlightedObjectIndex(r);if(r.isLoaded)if(r.layers)!r.layers[0]||r.layers[0].props.visible===n&&r.layers[0].props.highlightedObjectIndex===i||(r.layers=r.layers.map((function(e){return e.clone({visible:n,highlightedObjectIndex:i})})));else{var a=e.renderSubLayers(Object.assign({},e.props,{id:"".concat(e.id,"-").concat(r.x,"-").concat(r.y,"-").concat(r.z),data:r.data,visible:n,_offset:0,tile:r,highlightedObjectIndex:i}));r.layers=Object(u.b)(a,Boolean)}else;return r.layers}))}},{key:"isLoaded",get:function(){return this.state.tileset.selectedTiles.every((function(e){return e.layers&&e.layers.every((function(e){return e.isLoaded}))}))}}]),t}(l.a);k.layerName="TileLayer",k.defaultProps=x},zJdk:function(e,t,r){"use strict";function n(e){if(!e||!e.POSITION)return null;var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=e.POSITION.value,u=s&&s.length;if(!u)return null;for(var l=0;l<u;l+=3){var c=s[l],h=s[l+1],f=s[l+2];t=c<t?c:t,r=h<r?h:r,n=f<n?f:n,i=c>i?c:i,a=h>a?h:a,o=f>o?f:o}return[[t,r,n],[i,a,o]]}r.d(t,"a",(function(){return n}))}}]);