(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{jXMw:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var a=n("q1tI"),r=n.n(a),i=n("yYqN"),o=n("kAh0"),l=n("etlt"),s=n("kqDl"),c=n("7gZ0"),u=n("KhhE"),d=n("8rZH"),g=n("b6DE"),m=n("R1+Y"),p=n("c6EL"),f=n("DCxL"),b=n("zF4a"),h=n("PPQy"),y=n.n(h),w="https://raw.githubusercontent.com/visgl/deck.gl-data/master/examples/trips/buildings.json",v="https://raw.githubusercontent.com/visgl/deck.gl-data/master/examples/trips/trips-v7.json",C=new c.a({color:[255,255,255],intensity:1}),k=new u.a({color:[255,255,255],intensity:2,position:[-74.05,40.7,8e3]}),j={buildingColor:[74,80,87],trailColor0:[253,128,93],trailColor1:[23,184,190],material:{ambient:.1,diffuse:.6,shininess:32,specularColor:[60,64,70]},effects:[new d.a({ambientLight:C,pointLight:k})]},E={longitude:-74,latitude:40.72,zoom:13,pitch:45,bearing:0},L=[[[-74,40.7],[-74.02,40.7],[-74.02,40.72],[-74,40.72]]],O=1280,S=720,z={webm:{quality:.8},png:{archive:"zip"},jpeg:{archive:"zip",quality:.8},gif:{sampleInterval:1e3,width:O,height:S}},P={start:0,end:5e3,framerate:30},x=function(e){var t=e.children;return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",position:"relative",backgroundColor:"#11183c"}},t)};function M(e){var t=e.mapStyle,n=void 0===t?"mapbox://styles/mapbox/dark-v9":t,c=Object(a.useState)(),u=c[0],d=c[1],h=Object(a.useRef)(null),C=Object(a.useMemo)((function(){return h.current&&h.current.deck}),[h.current]),k=Object(a.useRef)(null),M=Object(a.useState)(!1),A=M[0],F=M[1],I=Object(l.b)(),R=Object(a.useMemo)((function(){return new o.a({getLayers:function(e){return e.applyLayerKeyframes([new p.a({id:"trips",data:v,getPath:function(e){return e.path},getTimestamps:function(e){return e.timestamps},getColor:function(e){return 0===e.vendor?j.trailColor0:j.trailColor1},opacity:1,widthMinPixels:2,rounded:!0,trailLength:180,shadowEnabled:!1}),new m.a({id:"buildings",data:w,extruded:!0,wireframe:!1,opacity:.5,getPolygon:function(e){return e.polygon},getElevation:function(e){return e.height},getFillColor:j.buildingColor,material:j.material}),new m.a({id:"ground",data:L,getPolygon:function(e){return e},stroked:!1,getFillColor:[0,0,0,0]})])},layerKeyframes:[{id:"trips",timings:[0,P.end],keyframes:[{currentTime:0},{currentTime:1800}]}]})}),[]),q=Object(l.a)(R,E),K=q.adapter,D=q.layers,T=q.cameraFrame,_=q.setCameraFrame,H=Object(a.useCallback)((function(e){var t=e.viewState;K.animationManager.setKeyframes("deck",{cameraKeyframe:{timings:[0,P.end],keyframes:[{longitude:t.longitude,latitude:t.latitude,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing},{longitude:t.longitude,latitude:t.latitude,zoom:t.zoom,bearing:t.bearing+180,pitch:t.pitch}],easings:[f.a.easeInOut]}}),_(t)}),[P.end]);Object(a.useEffect)((function(){return H({viewState:T})}),[]);return r.a.createElement(x,null,r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(i.a,Object.assign({ref:h,style:{position:"unset"},layers:D,effects:j.effects,controller:!0,viewState:T,onViewStateChange:H,onWebGLInitialized:d,parameters:{depthTest:!0,blend:!0,blendFunc:[y.a.SRC_ALPHA,y.a.ONE_MINUS_SRC_ALPHA]},width:O,height:S},K.getProps({deck:C})),u&&r.a.createElement(g.StaticMap,{ref:k,mapStyle:n,preventStyleDiffing:!0,gl:u,onLoad:function(){var e=k.current.getMap();D.length||e.addLayer(new b.a({id:"%%blank-layer",deck:C}));for(var t=0;t<D.length;t++)e.addLayer(new b.a({id:D[t].id,deck:C}));e.on("render",(function(){return K.onAfterRender(I)}))}}))),r.a.createElement(s.a,{adapter:K,busy:A,setBusy:F,formatConfigs:z,timecode:P}))}}}]);